/* ColConnect - main.css | v1.0 | Extrait de v8.html (style 1 + style 2) | Dépendances: aucune */
        :root {
            /* Palette officielle institutionnelle */
            --primary: #1e3a5f;           /* Bleu marine officiel */
            --primary-dark: #152a45;
            --primary-light: #2c5282;
            --secondary: #c9a227;         /* Or institutionnel */
            --secondary-light: #d4b545;
            --accent: #2d6a4f;            /* Vert officiel */
            --accent-light: #40916c;
            --accent-orange: #b45309;     /* Orange sobre */
            --danger: #991b1b;            /* Rouge officiel */
            --bg-main: #0d1b2a;           /* Fond bleu très foncé */
            --bg-card: #1b2838;           /* Cartes */
            --bg-elevated: #243447;       /* Éléments surélevés */
            --text-primary: #f0f4f8;
            --text-secondary: #a0aec0;
            --text-muted: #718096;
            --border: rgba(201, 162, 39, 0.15);
            --glow-primary: rgba(30, 58, 95, 0.5);
            --glow-accent: rgba(201, 162, 39, 0.3);
            --gradient-hero: linear-gradient(135deg, #1e3a5f 0%, #2c5282 50%, #c9a227 100%);
            --gradient-gold: linear-gradient(135deg, #c9a227 0%, #d4b545 100%);
            --gradient-card: linear-gradient(145deg, rgba(27, 40, 56, 0.9), rgba(13, 27, 42, 0.95));
        }

        .light {
            --bg-main: #f7f9fc;
            --bg-card: #ffffff;
            --bg-elevated: #edf2f7;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --text-muted: #718096;
            --border: rgba(30, 58, 95, 0.15);
            --gradient-card: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(247, 249, 252, 0.95));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ======================== */
        /* ÉCRAN D'IDENTIFICATION */
        /* ======================== */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0d1b2a 0%, #1e3a5f 50%, #0d1b2a 100%);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .login-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .login-container {
            width: 100%;
            max-width: 480px;
            padding: 2rem;
        }

        .login-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 3rem 2.5rem;
            text-align: center;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }

        .login-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-gold);
        }

        .login-emblem {
            width: 100px;
            height: 100px;
            margin: 0 auto 2rem;
            background: var(--gradient-hero);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: var(--secondary);
            box-shadow: 0 10px 40px var(--glow-primary);
            border: 2px solid var(--secondary);
        }

        .login-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .login-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 2.5rem;
        }

        .login-form-group {
            margin-bottom: 1.25rem;
            text-align: left;
        }

        .login-label {
            display: block;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .login-input {
            width: 100%;
            padding: 1rem 1.25rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .login-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px var(--glow-accent);
        }

        .login-input::placeholder {
            color: var(--text-muted);
        }

        .login-btn {
            width: 100%;
            padding: 1.1rem 2rem;
            background: var(--gradient-gold);
            border: none;
            border-radius: 12px;
            color: #0d1b2a;
            font-family: inherit;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            transition: all 0.3s ease;
            margin-top: 1.5rem;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px var(--glow-accent);
        }

        .login-footer {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }

        .login-footer p {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .login-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(201, 162, 39, 0.1);
            border: 1px solid rgba(201, 162, 39, 0.3);
            border-radius: 50px;
            color: var(--secondary);
            font-size: 0.8rem;
            font-weight: 500;
            margin-top: 1rem;
        }

        /* Animated Background for login */
        .login-bg-pattern {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            overflow: hidden;
        }

        .login-bg-pattern::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background:
                radial-gradient(circle at 20% 80%, rgba(30, 58, 95, 0.3) 0%, transparent 25%),
                radial-gradient(circle at 80% 20%, rgba(201, 162, 39, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 50% 50%, rgba(45, 106, 79, 0.1) 0%, transparent 50%);
            animation: loginBgFloat 25s ease-in-out infinite;
        }

        @keyframes loginBgFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(2%, 2%) rotate(2deg); }
            66% { transform: translate(-1%, 1%) rotate(-1deg); }
        }

        /* ======================== */
        /* MAIN APP STYLES */
        /* ======================== */

        /* Animated Background */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            overflow: hidden;
        }

        .bg-pattern::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background:
                radial-gradient(circle at 20% 80%, var(--glow-primary) 0%, transparent 25%),
                radial-gradient(circle at 80% 20%, var(--glow-accent) 0%, transparent 25%),
                radial-gradient(circle at 50% 50%, rgba(30, 58, 95, 0.15) 0%, transparent 50%);
            animation: bgFloat 20s ease-in-out infinite;
        }

        @keyframes bgFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(2%, 2%) rotate(2deg); }
            66% { transform: translate(-1%, 1%) rotate(-1deg); }
        }

        /* Grid Pattern */
        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                linear-gradient(rgba(201, 162, 39, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(201, 162, 39, 0.02) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: -1;
            pointer-events: none;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 1rem 2rem;
            background: var(--gradient-card);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            overflow: visible;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 0.75rem;
            overflow: visible;
        }

        .logo {
            grid-column: 1;
            justify-self: start;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .header-content .nav-tabs {
            grid-column: 2;
            justify-self: center;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-hero);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--secondary);
            box-shadow: 0 4px 20px var(--glow-primary);
            border: 1px solid var(--secondary);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 4px 20px var(--glow-primary); }
            50% { box-shadow: 0 4px 40px var(--glow-accent); }
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-subtitle {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            background: var(--bg-elevated);
            padding: 0.35rem;
            border-radius: 16px;
            border: 1px solid var(--border);
            overflow: visible;
        }

        .nav-tab {
            padding: 0.75rem 1.25rem;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.9rem;
            font-weight: 500;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .nav-tab:hover {
            color: var(--text-primary);
            background: rgba(201, 162, 39, 0.1);
        }

        .nav-tab.active {
            background: var(--gradient-gold);
            color: #0d1b2a;
            box-shadow: 0 4px 15px var(--glow-accent);
        }

        .nav-tab i {
            font-size: 1rem;
        }

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 100px 2rem 2rem;
            min-height: 100vh;
        }

        /* Sections */
        .section {
            display: none;
            animation: fadeSlideIn 0.5s ease forwards;
        }

        .section.active {
            display: block;
        }

        /* Anti-empiètement : forcer le masquage des sections inactives (évite que financeur/collectivité restent visibles) */
        .section:not(.active) {
            display: none !important;
            visibility: hidden !important;
            pointer-events: none !important;
        }

        @keyframes fadeSlideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ======================== */
        /* SECTION 1: DASHBOARD */
        /* ======================== */
        .hero-section {
            text-align: center;
            padding: 3rem 0;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(201, 162, 39, 0.15);
            border: 1px solid rgba(201, 162, 39, 0.3);
            border-radius: 50px;
            color: var(--secondary);
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            animation: shimmer 2s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { background: rgba(201, 162, 39, 0.15); }
            50% { background: rgba(201, 162, 39, 0.25); }
        }

        .hero-title {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 800;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .hero-title span {
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-desc {
            font-size: 1.15rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 2rem;
            line-height: 1.7;
        }

        /* Masquer les boutons Export PDF et Générer Rapport sur la page d'accueil */
        #dashboard .hero-actions,
        #dashboard button[data-action="export"][data-section="dashboard"],
        #dashboard button[onclick*="exportDashboardPDF"],
        .header-content button[onclick*="genererRapport"],
        .header-content button[onclick*="genererRapport"] {
            display: none !important;
            visibility: hidden !important;
        }
        
        /* Masquer les boutons avec icône file-pdf ou file-alt dans le header ou dashboard */
        .header-content button i.fa-file-pdf,
        .header-content button i.fa-file-alt,
        #dashboard button i.fa-file-pdf {
            display: none !important;
        }
        
        .header-content button:has(i.fa-file-alt),
        .header-content button:has(i.fa-file-pdf),
        #dashboard button:has(i.fa-file-pdf) {
            display: none !important;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-gold);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .stat-icon {
            width: 44px;
            height: 44px;
            border-radius: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.18);
        }

        .stat-icon.blue { background: rgba(30, 58, 95, 0.5); color: #60a5fa; }
        .stat-icon.green { background: rgba(45, 106, 79, 0.5); color: #6ee7b7; }
        .stat-icon.purple { background: rgba(201, 162, 39, 0.35); color: #fde047; }
        .stat-icon.orange { background: rgba(180, 83, 9, 0.35); color: #fdba74; }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            margin-bottom: 0.25rem;
            color: var(--secondary);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .action-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .action-card::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, var(--glow-accent), transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .action-card:hover::after {
            opacity: 1;
        }

        .action-card:hover {
            transform: translateY(-5px);
            border-color: var(--secondary);
        }

        .action-card.inactif {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }
        .action-card.inactif:hover {
            transform: none;
            border-color: var(--border);
        }

        .action-icon {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            margin-bottom: 1rem;
            background: var(--gradient-gold);
            color: #0d1b2a;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.22);
        }

        .action-icon.accent-bg {
            color: #fff;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
        }

        .action-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .action-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* ======================== */
        /* SECTION 2: SEARCH */
        /* ======================== */
        .search-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem 0;
        }

        .search-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .search-header h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .search-box {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .search-input {
            width: 100%;
            padding: 1.25rem 1.5rem 1.25rem 3.5rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 16px;
            font-size: 1.1rem;
            font-family: inherit;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 4px var(--glow-accent);
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-icon {
            position: absolute;
            left: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 1.25rem;
        }

        /* Filters */
        .filters-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 2rem;
        }

        .filter-chip {
            padding: 0.6rem 1.25rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 50px;
            font-size: 0.9rem;
            font-family: inherit;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-chip:hover, .filter-chip.active {
            background: var(--secondary);
            color: #0d1b2a;
            border-color: var(--secondary);
        }

        /* Recherche projet (page Projets des collectivités territoriales) */
        .projets-search-block {
            margin-bottom: 1.25rem;
        }
        .projets-search-wrap {
            position: relative;
            display: flex;
            align-items: center;
            max-width: 480px;
        }
        .projets-search-wrap .projets-search-icon {
            position: absolute;
            left: 1rem;
            color: var(--text-muted);
            font-size: 0.95rem;
            pointer-events: none;
        }
        .projets-search-input {
            width: 100%;
            padding: 0.75rem 2.25rem 0.75rem 2.75rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 0.9rem;
            font-family: inherit;
            color: var(--text-primary);
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        .projets-search-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(201, 162, 39, 0.15);
        }
        .projets-search-input::placeholder {
            color: var(--text-muted);
        }
        .projets-search-clear {
            position: absolute;
            right: 0.5rem;
            width: 1.75rem;
            height: 1.75rem;
            padding: 0;
            border: none;
            background: transparent;
            color: var(--text-muted);
            font-size: 1.25rem;
            line-height: 1;
            cursor: pointer;
            border-radius: 6px;
            display: none;
            align-items: center;
            justify-content: center;
            transition: color 0.2s, background 0.2s;
        }
        .projets-search-clear:hover {
            color: var(--text-primary);
            background: rgba(255,255,255,0.08);
        }
        .projets-search-clear.visible {
            display: flex;
        }
        .projets-search-count {
            margin: 0.5rem 0 0;
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        .projets-search-count strong { color: var(--text-secondary); }
        .projets-empty-state {
            padding: 2.5rem 1.5rem;
            text-align: center;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            color: var(--text-muted);
            font-size: 0.95rem;
        }
        .projets-empty-state i { margin-right: 0.5rem; color: var(--secondary); }

        /* Pagination Filter */
        .pagination-filter {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: auto;
        }

        .pagination-filter label {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .page-size-select {
            padding: 0.5rem 0.75rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.85rem;
            font-family: inherit;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23a0aec0' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            padding-right: 1.75rem;
        }

        .page-size-select:hover {
            border-color: var(--secondary);
        }

        .page-size-select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px var(--glow-accent);
        }

        .page-size-select option {
            background: var(--bg-card);
            color: var(--text-primary);
        }

        /* Collectivité Cards */
        .results-grid {
            display: grid;
            gap: 1rem;
        }

        .collectivite-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .collectivite-card:hover {
            border-color: var(--secondary);
            transform: translateX(10px);
        }

        .collectivite-avatar {
            width: 70px;
            height: 70px;
            border-radius: 16px;
            background: var(--gradient-hero);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            color: var(--secondary);
            flex-shrink: 0;
            border: 1px solid var(--secondary);
        }

        .collectivite-info {
            flex: 1;
        }

        .collectivite-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .collectivite-type {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        .collectivite-stats {
            display: flex;
            gap: 1.5rem;
        }

        .collectivite-stat {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .collectivite-stat i {
            color: var(--secondary);
        }

        .collectivite-arrow {
            color: var(--text-muted);
            font-size: 1.25rem;
            transition: transform 0.3s ease;
        }

        .collectivite-card:hover .collectivite-arrow {
            transform: translateX(5px);
            color: var(--secondary);
        }

        /* ======================== */
        /* SECTION 3: FICHE */
        /* ======================== */
        .fiche-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
        }

        @media (max-width: 900px) {
            .fiche-container {
                grid-template-columns: 1fr;
            }
        }

        .fiche-sidebar {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 2rem;
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .fiche-avatar-large {
            width: 120px;
            height: 120px;
            margin: 0 auto 1.5rem;
            border-radius: 24px;
            background: var(--gradient-hero);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--secondary);
            box-shadow: 0 10px 40px var(--glow-primary);
            border: 2px solid var(--secondary);
        }

        .fiche-name {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .fiche-type-badge {
            display: block;
            text-align: center;
            padding: 0.4rem 1rem;
            background: rgba(201, 162, 39, 0.15);
            color: var(--secondary);
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
            margin: 0 auto 1.5rem;
            width: fit-content;
            border: 1px solid rgba(201, 162, 39, 0.3);
        }

        .fiche-details {
            border-top: 1px solid var(--border);
            padding-top: 1.5rem;
        }

        .fiche-detail-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border);
        }

        .fiche-detail-item:last-child {
            border-bottom: none;
        }

        .fiche-detail-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
        }

        .fiche-detail-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .fiche-detail-value {
            font-weight: 500;
        }

        .fiche-main {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .fiche-section-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 1.5rem;
        }

        .fiche-section-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .fiche-section-title i {
            color: var(--secondary);
        }

        /* Team List */
        .team-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .team-member {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: var(--bg-elevated);
            border-radius: 12px;
        }

        .team-avatar {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            background: var(--gradient-hero);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            font-weight: 600;
            border: 1px solid var(--secondary);
        }

        .team-role {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* ======================== */
        /* PARTENAIRES FINANCIERS (compact) */
        /* ======================== */
        .partners-section {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 0.9rem 1rem;
            margin-top: 0.75rem;
        }

        .partners-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.6rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        .partners-title i {
            color: var(--secondary);
        }

        .partners-grid {
            display: grid;
            gap: 0.5rem;
        }

        .partner-item {
            display: flex;
            align-items: center;
            gap: 0.65rem;
            padding: 0.5rem 0.65rem;
            background: var(--bg-elevated);
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .partner-logo {
            width: 38px;
            height: 38px;
            border-radius: 8px;
            background: var(--gradient-hero);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: var(--secondary);
            flex-shrink: 0;
            border: 1px solid var(--secondary);
        }

        .partner-info {
            flex: 1;
        }

        .partner-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.1rem;
        }

        .partner-type {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .partner-contribution {
            text-align: right;
        }

        .partner-amount {
            font-size: 1.05rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: var(--secondary);
        }

        .partner-percentage {
            font-size: 0.75rem;
            color: var(--accent-light);
        }

        .partners-total {
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 2px solid var(--secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .partners-total-label {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .partners-total-amount {
            font-size: 1.2rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: var(--secondary);
        }

        /* Workflow validation quotes-parts */
        .qp-workflow-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 16px;
        }
        .qp-workflow-section h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .qp-workflow-section h3 i { color: var(--secondary); }
        .qp-simulation-table-wrap {
            overflow-x: auto;
            margin-bottom: 1rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: var(--bg-elevated);
        }
        .qp-simulation-table-wrap.locked { opacity: 0.85; pointer-events: none; user-select: none; }
        .qp-simulation-table {
            width: 100%;
            border-collapse: collapse;
        }
        .qp-simulation-table th, .qp-simulation-table td { padding: 0.75rem 1rem; text-align: left; border-bottom: 1px solid var(--border); }
        .qp-simulation-table th { font-size: 0.8rem; text-transform: uppercase; color: var(--text-muted); background: rgba(0,0,0,0.15); }
        .qp-simulation-table input { width: 100%; padding: 0.4rem 0.6rem; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-main); color: var(--text-primary); }
        .qp-simulation-table input:read-only { background: var(--bg-elevated); cursor: not-allowed; }
        .qp-btn-generate {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            border: none;
            background: var(--gradient-gold);
            color: #0d1b2a;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 1rem;
        }
        .qp-btn-generate:hover { filter: brightness(1.1); transform: translateY(-1px); }
        .qp-notice {
            padding: 1rem;
            background: rgba(201, 162, 39, 0.12);
            border: 1px solid rgba(201, 162, 39, 0.3);
            border-radius: 12px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        .qp-notice strong { color: var(--secondary); }
        .qp-statuts-table-wrap { margin-top: 1rem; overflow-x: auto; border-radius: 12px; border: 1px solid var(--border); background: var(--bg-elevated); }
        .qp-statuts-table { width: 100%; border-collapse: collapse; }
        .qp-statuts-table th, .qp-statuts-table td { padding: 0.6rem 1rem; text-align: left; border-bottom: 1px solid var(--border); font-size: 0.9rem; }
        .qp-statuts-table th { color: var(--text-muted); }
        .qp-statut-badge { display: inline-block; padding: 0.25rem 0.6rem; border-radius: 8px; font-size: 0.8rem; font-weight: 600; }
        .qp-statut-badge.valide { background: rgba(45, 106, 79, 0.3); color: #6ee7b7; }
        .qp-statut-badge.modifie { background: rgba(245, 158, 11, 0.3); color: #fcd34d; }
        .qp-statut-badge.refuse { background: rgba(153, 27, 27, 0.3); color: #fca5a5; }
        .qp-statut-badge.en-attente { background: rgba(160, 174, 192, 0.2); color: var(--text-secondary); }
        .qp-statuts-table select.qp-statut-select { padding: 0.35rem 0.5rem; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-main); color: var(--text-primary); font-size: 0.85rem; min-width: 120px; }
        .qp-actions-cell { display: flex; align-items: center; gap: 0.5rem; }
        .qp-btn-valide { padding: 0.35rem 0.65rem; border: none; border-radius: 8px; background: var(--accent); color: #fff; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: 0.35rem; font-size: 0.85rem; font-weight: 500; }
        .qp-btn-valide:hover:not(:disabled) { background: var(--accent-light); filter: brightness(1.1); }
        .qp-btn-valide:disabled { background: rgba(45, 106, 79, 0.5); color: rgba(255,255,255,0.8); cursor: default; }
        .qp-btn-modifier { padding: 0.35rem 0.65rem; border: 1px solid var(--border); border-radius: 8px; background: transparent; color: var(--text-secondary); cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: 0.35rem; font-size: 0.85rem; font-weight: 500; }
        .qp-btn-modifier:hover { background: rgba(160, 174, 192, 0.2); border-color: var(--secondary); color: var(--secondary); }
        .qp-btn-del { width: 32px; height: 32px; border: none; border-radius: 8px; background: rgba(153,27,27,0.25); color: #fca5a5; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; font-size: 0.9rem; }
        .qp-btn-del:hover { background: rgba(153,27,27,0.45); color: #fecaca; }
        .qp-row-valide { background: rgba(45, 106, 79, 0.18); }
        .qp-row-valide td { background: transparent; }
        .qp-row-valide select.qp-statut-select,
        .qp-row-valide .qp-date,
        .qp-row-valide .qp-ref { background: var(--bg-card); color: var(--text-primary); cursor: not-allowed; border-color: rgba(45, 106, 79, 0.35); }
        .qp-btn-add { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 10px; border: 1px dashed var(--border); background: transparent; color: var(--text-secondary); cursor: pointer; font-size: 0.9rem; margin-bottom: 1rem; }
        .qp-btn-add:hover { border-color: var(--secondary); color: var(--secondary); }
        .qp-histoire { margin-top: 1rem; padding: 1rem; background: rgba(0,0,0,0.15); border-radius: 12px; font-size: 0.85rem; color: var(--text-muted); }
        .qp-histoire h4 { font-size: 0.95rem; margin-bottom: 0.5rem; color: var(--text-secondary); }

        /* Visibilité conditionnelle pour projets externes */
        .projet-externe .partner-amount,
        .projet-externe .partner-percentage,
        .projet-externe .partners-total-amount {
            display: none !important;
        }

        .projet-externe #projetTimeline .timeline-item {
            opacity: 0.3;
        }
        .projet-externe #projetTimeline .timeline-date,
        .projet-externe #projetTimeline .timeline-label {
            display: none !important;
        }

        .projet-externe #projetArchiveList .archive-item {
            display: none !important;
        }
        .projet-externe #projetArchiveList:empty::before {
            content: 'Aucun document disponible';
            display: block;
            padding: 2rem;
            text-align: center;
            color: var(--text-muted);
            font-style: italic;
        }

        .projet-externe #projetValidationSignataire {
            color: var(--text-muted) !important;
            opacity: 0.5;
        }

        /* Masquage Budget & Financement pour projets externes */
        .detail-view.projet-externe #projetBudgetDejaFinance,
        .detail-view.projet-externe #projetBudgetASecuriser,
        .detail-view.projet-externe #projetBudgetNature,
        .projet-externe #projetBudgetDejaFinance,
        .projet-externe #projetBudgetASecuriser,
        .projet-externe #projetBudgetNature,
        .projet-externe .projet-budget-finance-deja,
        .projet-externe .projet-budget-finance-securiser,
        .projet-externe .projet-budget-finance-nature {
            display: none !important;
        }

        /* Masquage du contenu (pas du titre) - Avancement & prochaines étapes pour projets externes */
        .detail-view.projet-externe #projetAvancementEtapesContent,
        .projet-externe #projetAvancementEtapesContent {
            display: none !important;
        }

        /* Masquage du contenu (pas du titre) - Points d'attention pour projets externes */
        .detail-view.projet-externe #projetPointsAttentionContent,
        .projet-externe #projetPointsAttentionContent {
            display: none !important;
        }

        /* ======================== */
        /* SECTION 4: PROJETS */
        /* ======================== */
        .projets-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .projets-title {
            font-size: 1.75rem;
            font-weight: 700;
        }

        .view-toggle {
            display: flex;
            gap: 0.5rem;
            background: var(--bg-card);
            padding: 0.35rem;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .view-btn {
            padding: 0.6rem 1rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .view-btn.active {
            background: var(--secondary);
            color: #0d1b2a;
        }

        /* Status Pills */
        .status-pills {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .status-pill {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-pill.etude { background: rgba(180, 83, 9, 0.2); color: var(--accent-orange); }
        .status-pill.travaux { background: rgba(30, 58, 95, 0.3); color: var(--primary-light); }
        .status-pill.termine { background: rgba(45, 106, 79, 0.45); color: #52b788; font-weight: 500; }

        /* Project Cards */
        .projets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1rem;
        }

        /* Vue liste (boutons grille/liste) */
        .projets-grid.list-view {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .projets-grid.list-view .projet-card:hover {
            transform: none;
        }

        .projet-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 14px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .projet-card:hover {
            transform: translateY(-5px);
            border-color: var(--secondary);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .projet-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: flex-start;
            gap: 0.5rem;
            padding: 1rem;
            background: linear-gradient(135deg, rgba(30, 58, 95, 0.2), rgba(201, 162, 39, 0.1));
            border-bottom: 1px solid var(--border);
        }
        
        .projet-header > div:first-child {
            flex: 1;
            min-width: 0;
        }

        .projet-collectivite-pastille {
            flex-shrink: 0;
            padding: 0.25rem 0.6rem;
            border-radius: 999px;
            font-size: 0.7rem;
            font-weight: 600;
            color: #fff !important;
            white-space: nowrap;
            max-width: 180px;
            overflow: hidden;
            display: inline-block !important;
            visibility: visible !important;
            opacity: 1 !important;
            text-overflow: ellipsis;
        }

        .projet-adresse {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.35rem;
        }

        .projet-adresse i { margin-right: 0.35rem; color: var(--secondary); }

        .projet-status {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.25rem 0.55rem;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .projet-status.creation { background: rgba(201,162,39,0.35); color: #0d1b2a; }
        .projet-status.etude { background: var(--accent-orange); color: white; }
        .projet-status.travaux { background: var(--primary-light); color: white; }
        .projet-status.termine { background: var(--accent); color: white; }

        .projet-status::before {
            content: '';
            width: 6px;
            height: 6px;
            background: currentColor;
            border-radius: 50%;
            animation: blink 1.5s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .projet-title {
            font-size: 1rem;
            font-weight: 600;
            line-height: 1.35;
        }

        .projet-code-block {
            display: block;
            font-size: 0.8rem;
            font-weight: 400;
            color: var(--text-muted);
            margin-top: 0.2rem;
        }

        .detail-code { font-size: 0.9rem; margin-top: 0.25rem; }

        .projet-body {
            padding: 1rem;
        }

        /* Progress Bars */
        .progress-section {
            margin-bottom: 0.5rem;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.3rem;
            font-size: 0.8rem;
        }

        .progress-bar {
            height: 6px;
            background: var(--bg-elevated);
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s ease;
        }

        .progress-fill.etudes { background: linear-gradient(90deg, var(--accent-orange), #d97706); }
        .progress-fill.travaux { background: linear-gradient(90deg, var(--primary), var(--secondary)); }

        .projet-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 0.65rem;
            border-top: 1px solid var(--border);
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .projet-meta i {
            margin-right: 0.35rem;
            color: var(--secondary);
        }

        /* ======================== */
        /* SECTION 5: DETAIL PROJET */
        /* ======================== */
        .detail-back {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .detail-back:hover {
            color: var(--secondary);
        }

        /* Mes Projets Back Button */
        .mes-projets-back {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            cursor: pointer;
            transition: color 0.3s ease;
            margin-right: auto;
        }

        .mes-projets-back:hover {
            color: var(--secondary);
        }

        .detail-hero {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .detail-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-gold);
        }

        .detail-title-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .detail-title {
            font-size: 1.75rem;
            font-weight: 700;
        }

        /* Map Container */
        .map-container {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .map-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .map-header i {
            color: var(--secondary);
            font-size: 1.25rem;
        }

        .map-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
        }

        #project-map {
            height: 350px;
            min-height: 280px;
            width: 100%;
            display: block;
            background: var(--bg-elevated);
        }
        #detailCollectiviteView .map-container {
            display: block !important;
            min-height: 1px;
            overflow: visible;
        }

        .map-info {
            padding: 1rem 1.5rem;
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .map-info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .map-info-item i {
            color: var(--secondary);
        }

        .detail-analyse-block {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 1.25rem 1.5rem;
            margin-bottom: 2rem;
        }
        .detail-analyse-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem; }
        .detail-analyse-title i { color: var(--secondary); }
        .detail-analyse-text { color: var(--text-secondary); font-size: 0.95rem; line-height: 1.5; margin: 0; }

        /* Timeline (compact + visible) */
        #detailCollectiviteView .timeline-container,
        #projetTimelineContainer {
            display: block !important;
            visibility: visible !important;
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 0.9rem 1rem;
            margin-bottom: 0.75rem;
            min-height: 1px;
        }

        .timeline-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .timeline-title i {
            color: var(--secondary);
        }

        #detailCollectiviteView .timeline,
        .timeline {
            position: relative;
            padding-left: 1.5rem;
            display: block !important;
        }

        #detailCollectiviteView .timeline::before,
        .timeline::before {
            content: '';
            position: absolute;
            left: 5px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }

        #detailCollectiviteView .timeline-item,
        .timeline-item {
            position: relative;
            padding-bottom: 0.85rem;
            display: block !important;
            min-height: 1px;
        }

        .timeline-item:last-child {
            padding-bottom: 0;
        }

        .timeline-dot {
            position: absolute;
            left: -1.5rem;
            top: 2px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 2px solid var(--text-muted);
        }

        .timeline-item.completed .timeline-dot {
            background: var(--accent);
            border-color: var(--accent);
        }

        .timeline-item.active .timeline-dot {
            background: var(--secondary);
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px var(--glow-accent);
            animation: pulse 2s ease-in-out infinite;
        }

        #detailCollectiviteView .timeline-content,
        .timeline-content {
            display: block !important;
            visibility: visible !important;
            background: var(--bg-elevated);
            border-radius: 10px;
            padding: 0.5rem 0.75rem;
            min-height: 1px;
        }

        .timeline-date {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.15rem;
        }

        .timeline-label {
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Phases Grid (compact + visible) */
        .phases-grid {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .phase-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 0.75rem 1rem;
            text-align: center;
            display: block !important;
            min-height: 1px;
        }

        .phase-icon {
            width: 44px;
            height: 44px;
            margin: 0 auto 0.5rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.15rem;
        }

        .phase-icon.etudes { background: rgba(180, 83, 9, 0.2); color: var(--accent-orange); }
        .phase-icon.travaux { background: rgba(30, 58, 95, 0.3); color: var(--primary-light); }
        .phase-icon.livraison { background: rgba(45, 106, 79, 0.45); color: #52b788; }

        .phase-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .phase-progress {
            font-size: 1.35rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Validation Section (compact + visible) */
        #detailCollectiviteView .validation-card,
        #projetValidationCard {
            display: block !important;
            visibility: visible !important;
            background: linear-gradient(135deg, rgba(45, 106, 79, 0.15), rgba(30, 58, 95, 0.15));
            border: 1px solid var(--accent);
            border-radius: 14px;
            padding: 0.9rem 1rem;
            text-align: center;
            min-height: 1px;
        }

        .validation-icon {
            width: 52px;
            height: 52px;
            margin: 0 auto 0.5rem;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.35rem;
            color: white;
        }

        .validation-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .validation-date {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        .validation-signature {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.45rem 1rem;
            background: var(--bg-card);
            border-radius: 50px;
            font-weight: 500;
            font-size: 0.85rem;
            border: 1px solid var(--border);
        }

        /* ======================== */
        /* VUE FINANCEUR – RENDU COMPACT (aligné sur vue Collectivité) */
        /* ======================== */
        #detailFinanceurView .financeur-hero {
            display: block !important;
            visibility: visible !important;
            padding: 0.9rem 1rem;
            margin-bottom: 0.75rem;
            border-radius: 14px;
        }
        #detailFinanceurView .financeur-title { font-size: 1.15rem; margin-bottom: 0.2rem; }
        #detailFinanceurView #financeurProjectCode { display: block; font-size: 0.9rem; color: var(--text-muted); margin-bottom: 0.5rem; }
        #detailFinanceurView .financeur-meta { font-size: 0.85rem; line-height: 1.45; }
        #detailFinanceurView .financeur-grid {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }
        #detailFinanceurView .financeur-kpi {
            display: block !important;
            padding: 0.6rem 0.75rem;
            border-radius: 12px;
            min-height: 1px;
        }
        #detailFinanceurView .financeur-kpi .v { font-size: 0.95rem; }
        /* Échéancier (équivalent timeline) – compact + visible */
        #detailFinanceurView .financeur-deadlines,
        #detailFinanceurView #financeurDeadlines {
            display: block !important;
            visibility: visible !important;
            padding: 0.9rem 1rem;
            margin-bottom: 0.75rem;
            border-radius: 14px;
            min-height: 1px;
        }
        #detailFinanceurView .financeur-deadlines h3 { margin-bottom: 0.6rem; font-size: 1rem; }
        #detailFinanceurView .echeancier-note { margin: -0.3rem 0 0.6rem 0; font-size: 0.78rem; color: var(--text-muted); font-style: italic; line-height: 1.4; }
        #detailFinanceurView .deadline-timeline { padding-left: 1.5rem; }
        #detailFinanceurView .deadline-item { padding: 0.5rem 0 0.5rem 0.75rem; }
        #detailFinanceurView .deadline-alert { margin-top: 0.6rem; padding: 0.5rem 0.75rem; }
        /* Cartes financeur */
        #detailFinanceurView .financeur-card {
            display: block !important;
            visibility: visible !important;
            padding: 0.9rem 1rem;
            margin-bottom: 0.75rem;
            border-radius: 14px;
            min-height: 1px;
        }
        #detailFinanceurView .financeur-card h3 {
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
            font-size: 1rem;
        }
        #detailFinanceurView .financeur-card p,
        #detailFinanceurView .financeur-card li { font-size: 0.9rem; line-height: 1.5; }
        /* Section climat */
        #detailFinanceurView .financeur-climat-section {
            display: block !important;
            visibility: visible !important;
            padding: 0.9rem 1rem;
            margin-bottom: 0.75rem;
            border-radius: 14px;
            min-height: 1px;
        }
        #detailFinanceurView .financeur-climat-section h3 { font-size: 1rem; margin-bottom: 0.5rem; }
        #detailFinanceurView .climat-grid { gap: 0.5rem; margin-top: 0.6rem; }
        #detailFinanceurView .climat-field { padding: 0.4rem 0; }
        #detailFinanceurView .registre-references-grid { gap: 0.6rem; }
        /* Registre de conformité */
        #detailFinanceurView .financeur-registre-conformite {
            display: block !important;
            visibility: visible !important;
            padding: 0.9rem 1rem;
            margin-bottom: 0.75rem;
            border-radius: 14px;
            min-height: 1px;
        }
        #detailFinanceurView .financeur-registre-conformite h3 { font-size: 1rem; margin-bottom: 0.5rem; }
        #detailFinanceurView .registre-reference-card { padding: 0.6rem 0.75rem; }
        #detailFinanceurView .conformite-score { padding: 0.6rem 0; }
        #detailFinanceurView .standardisation-badges { gap: 0.5rem; margin-top: 0.5rem; }
        #detailFinanceurView .financeur-note { margin-top: 0.6rem; font-size: 0.85rem; }

        /* ======================== */
        /* FONCTIONNALITÉ 1: ASSISTANT IA */
        /* ======================== */
        .ai-assistant {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }

        .ai-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gradient-gold);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #0d1b2a;
            box-shadow: 0 10px 40px var(--glow-accent);
            transition: all 0.3s ease;
        }

        .ai-toggle:hover {
            transform: scale(1.1);
        }

        .ai-panel {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 400px;
            max-width: calc(100vw - 2rem);
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);
            display: none;
            flex-direction: column;
            overflow: hidden;
            max-height: 600px;
        }

        .ai-panel.open {
            display: flex;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ai-header {
            padding: 1.25rem 1.5rem;
            background: var(--gradient-hero);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .ai-avatar {
            width: 40px;
            height: 40px;
            background: rgba(201, 162, 39, 0.3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: var(--secondary);
        }

        .ai-name {
            font-weight: 600;
            color: white;
        }

        .ai-status {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .ai-close {
            margin-left: auto;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ai-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .ai-message {
            max-width: 85%;
            padding: 0.875rem 1rem;
            border-radius: 16px;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .ai-message.bot {
            background: var(--bg-elevated);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .ai-message.user {
            background: var(--secondary);
            color: #0d1b2a;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .ai-message.loading {
            display: flex;
            gap: 0.3rem;
        }

        .ai-message.loading span {
            width: 8px;
            height: 8px;
            background: var(--text-muted);
            border-radius: 50%;
            animation: bounce 1.4s ease-in-out infinite;
        }

        .ai-message.loading span:nth-child(2) { animation-delay: 0.2s; }
        .ai-message.loading span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Quick Suggestions */
        .ai-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            padding: 0 1.5rem 1rem;
        }

        .ai-suggestion {
            padding: 0.5rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 50px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ai-suggestion:hover {
            background: var(--secondary);
            color: #0d1b2a;
            border-color: var(--secondary);
        }

        .ai-input-area {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 0.75rem;
        }

        .ai-input {
            flex: 1;
            padding: 0.875rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 0.9rem;
            font-family: inherit;
            color: var(--text-primary);
            resize: none;
        }

        .ai-input:focus {
            outline: none;
            border-color: var(--secondary);
        }

        .ai-send {
            width: 45px;
            height: 45px;
            background: var(--gradient-gold);
            border: none;
            border-radius: 12px;
            color: #0d1b2a;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            transition: transform 0.3s ease;
        }

        .ai-send:hover {
            transform: scale(1.05);
        }

        /* ======================== */
        /* FONCTIONNALITÉ 2: SUIVI INTERACTIF (compact) */
        /* ======================== */
        .suivi-widget {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 0.9rem 1rem;
            margin-top: 0.75rem;
        }

        .suivi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.6rem;
        }

        .suivi-title {
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .suivi-title i {
            color: var(--secondary);
        }

        .suivi-visual {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.35rem;
            margin-bottom: 0;
        }

        .suivi-step {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.35rem;
            position: relative;
        }

        .suivi-step::after {
            content: '';
            position: absolute;
            top: 18px;
            left: calc(50% + 26px);
            width: calc(100% - 52px);
            height: 2px;
            background: var(--border);
        }

        .suivi-step:last-child::after {
            display: none;
        }

        .suivi-step.completed::after {
            background: var(--accent);
        }

        .suivi-step.active::after {
            background: linear-gradient(90deg, var(--secondary), var(--border));
        }

        .suivi-icon-wrapper {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: var(--text-muted);
            border: 2px solid var(--border);
            position: relative;
            z-index: 1;
            transition: all 0.3s ease;
        }

        .suivi-step.completed .suivi-icon-wrapper {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .suivi-step.active .suivi-icon-wrapper {
            background: var(--secondary);
            border-color: var(--secondary);
            color: #0d1b2a;
            box-shadow: 0 0 14px var(--glow-accent);
        }

        .suivi-label {
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-muted);
        }

        .suivi-step.completed .suivi-label,
        .suivi-step.active .suivi-label {
            color: var(--text-primary);
        }

        /* ======================== */
        /* FONCTIONNALITÉ 3: VALIDATION */
        /* ======================== */
        .validation-widget {
            background: linear-gradient(135deg, rgba(201, 162, 39, 0.1), rgba(30, 58, 95, 0.15));
            border: 1px solid var(--secondary);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            margin-top: 2rem;
        }

        .validation-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(201, 162, 39, 0.2);
            border-radius: 50px;
            color: var(--secondary);
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .validation-cta {
            padding: 1rem 2rem;
            background: var(--gradient-gold);
            border: none;
            border-radius: 12px;
            color: #0d1b2a;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .validation-cta:hover:not(.disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px var(--glow-accent);
        }

        .validation-cta.disabled {
            background: var(--bg-elevated);
            color: var(--text-muted);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .validation-cta.disabled:hover {
            transform: none;
            box-shadow: none;
        }

        /* ======================== */
        /* FONCTIONNALITÉ 4: ARCHIVAGE (compact) */
        /* ======================== */
        .archive-widget {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 0.9rem 1rem;
            margin-top: 0.75rem;
        }

        .archive-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .archive-title {
            font-size: 0.95rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .archive-title i {
            color: var(--secondary);
        }

        .archive-list {
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
        }

        .archive-item {
            display: flex;
            align-items: center;
            gap: 0.65rem;
            padding: 0.45rem 0.65rem;
            background: var(--bg-elevated);
            border-radius: 8px;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .archive-item:hover {
            background: rgba(201, 162, 39, 0.1);
        }

        .archive-icon {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            background: rgba(201, 162, 39, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
        }

        .archive-info {
            flex: 1;
        }

        .archive-name {
            font-weight: 500;
        }

        .archive-date {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal-overlay.open {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            background: var(--bg-elevated);
            border: none;
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--danger);
            color: white;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            font-family: inherit;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-secondary {
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            color: var(--text-secondary);
        }

        .btn-secondary:hover {
            color: var(--text-primary);
            border-color: var(--text-muted);
        }

        .btn-primary {
            background: var(--gradient-gold);
            border: none;
            color: #0d1b2a;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--glow-accent);
        }

        .btn-validated {
            background: #16a34a;
            color: #fff;
            border: none;
            cursor: default;
            opacity: 1;
        }
        .btn-validated:hover { transform: none; }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-secondary);
        }
        .form-hint { font-size: 0.8rem; color: var(--danger); margin-top: 0.25rem; }
        .form-hint-muted { color: var(--text-muted, #94a3b8) !important; }

        .form-input, .form-select {
            width: 100%;
            padding: 0.875rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .form-range { width: 100%; height: 0.5rem; accent-color: var(--secondary); cursor: pointer; }
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--secondary);
        }

        .form-input-fixed {
            cursor: default;
            background: rgba(255,255,255,0.04);
            color: var(--text-secondary);
        }

        .form-input-readonly {
            cursor: default;
            background: rgba(255,255,255,0.04);
            color: var(--text-secondary);
            user-select: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 1rem;
            }

            .header-content {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto;
                gap: 1rem;
            }

            .header-content .logo {
                grid-column: 1;
                grid-row: 1;
            }

            .header-content .nav-tabs {
                grid-column: 1;
                grid-row: 2;
                justify-self: center;
                width: auto;
                max-width: 100%;
                overflow-x: auto;
                justify-content: center;
            }

            .nav-tab span {
                display: none;
            }

            .main-container {
                padding: 130px 1rem 1rem;
            }

            .fiche-container {
                grid-template-columns: 1fr;
            }

            .fiche-sidebar {
                position: relative;
                top: 0;
            }

            .projets-grid {
                grid-template-columns: 1fr;
            }

            .ai-panel {
                right: -1rem;
                width: calc(100vw - 1rem);
            }

            .suivi-visual {
                flex-direction: column;
            }

            .suivi-step::after {
                display: none;
            }

            .login-container {
                padding: 1rem;
            }

            .login-card {
                padding: 2rem 1.5rem;
            }
        }
    /* KPI grid (Fiche collectivité) */
.fiche-kpis{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.75rem;
  margin: 1rem 0;
}
@media (max-width: 768px){
  .fiche-kpis{ grid-template-columns: 1fr; }
}
.fiche-kpi{
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 0.85rem;
}
.fiche-kpi-label{
  font-size: 0.7rem;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 0.35rem;
}
.fiche-kpi-value{
  font-weight: 700;
  color: var(--secondary);
  font-family: 'JetBrains Mono', monospace;
  font-size: 1rem;
}

/* ======================== */
/* RESPONSIVE DESIGN AMÉLIORÉ */
/* ======================== */

/* iPad Pro & iPad (1024px) */
@media (max-width: 1024px) {
    .header-content {
        padding: 0 1rem;
    }

    .nav-tabs {
        padding: 0.25rem;
        gap: 0.25rem;
    }

    .nav-tab {
        padding: 0.6rem 1rem;
        font-size: 0.85rem;
    }

    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .quick-actions {
        grid-template-columns: repeat(2, 1fr);
    }

    .search-results {
        grid-template-columns: repeat(2, 1fr);
    }

    .fiche-container {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }

    .projets-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .ai-panel {
        width: 380px;
    }
}

/* iPad Mini (850px) */
@media (max-width: 850px) {
    .nav-tab span {
        font-size: 0.8rem;
    }

    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
    }

    .stat-card {
        padding: 1rem;
    }

    .stat-value {
        font-size: 1.5rem;
    }

    .quick-actions {
        grid-template-columns: 1fr;
    }

    .hero-title {
        font-size: 2rem;
    }
}

/* iPhone SE & petits écrans (375px) */
@media (max-width: 375px) {
    .header {
        padding: 0.75rem;
    }

    .logo-text {
        font-size: 1.2rem;
    }

    .logo-icon {
        width: 40px;
        height: 40px;
        font-size: 1.2rem;
    }

    .nav-tabs {
        padding: 0.2rem;
    }

    .nav-tab {
        padding: 0.5rem;
    }

    .main-container {
        padding: 110px 0.75rem 0.75rem;
    }

    .stat-card {
        padding: 0.75rem;
    }

    .stat-icon {
        width: 36px;
        height: 36px;
        font-size: 1rem;
    }

    .stat-value {
        font-size: 1.25rem;
    }

    .stat-label {
        font-size: 0.7rem;
    }

    .hero-title {
        font-size: 1.5rem;
    }

    .hero-desc {
        font-size: 0.9rem;
    }

    .action-card {
        padding: 1rem;
    }

    .ai-panel {
        width: 100vw;
        right: 0;
        border-radius: 20px 20px 0 0;
    }

    .ai-suggestion {
        font-size: 0.75rem;
        padding: 0.4rem 0.75rem;
    }

    .login-title {
        font-size: 1.5rem;
    }

    .login-emblem {
        width: 80px;
        height: 80px;
        font-size: 2rem;
    }
}

/* ======================== */
/* ANDROID & SAMSUNG DEVICES */
/* ======================== */

/* Samsung Galaxy Tab S7/S8/S9 (1280px landscape) */
@media (max-width: 1280px) and (min-width: 1025px) {
    .header-content {
        max-width: 100%;
        padding: 0 1.5rem;
    }

    .nav-tab {
        padding: 0.7rem 1.1rem;
    }

    .main-container {
        max-width: 100%;
        padding-left: 1.5rem;
        padding-right: 1.5rem;
    }

    .stats-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 1rem;
    }

    .quick-actions {
        grid-template-columns: repeat(3, 1fr);
    }

    .projets-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* Samsung Galaxy Tab A / Tab S (800px portrait) */
@media (max-width: 800px) and (min-width: 769px) {
    .nav-tabs {
        padding: 0.25rem;
    }

    .nav-tab {
        padding: 0.6rem 0.9rem;
        font-size: 0.82rem;
    }

    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .quick-actions {
        grid-template-columns: repeat(2, 1fr);
    }

    .search-results {
        grid-template-columns: repeat(2, 1fr);
    }

    .projets-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .ai-panel {
        width: 360px;
    }
}

/* Samsung Galaxy S series / Pixel (412px - 414px) */
@media (max-width: 414px) and (min-width: 376px) {
    .header {
        padding: 0.85rem 1rem;
    }

    .logo-text {
        font-size: 1.3rem;
    }

    .logo-icon {
        width: 42px;
        height: 42px;
    }

    .nav-tabs {
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }

    .nav-tabs::-webkit-scrollbar {
        display: none;
    }

    .nav-tab span {
        display: none;
    }

    .nav-tab {
        padding: 0.6rem 0.8rem;
    }

    .main-container {
        padding: 120px 1rem 1rem;
    }

    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.6rem;
    }

    .stat-card {
        padding: 0.85rem;
    }

    .stat-value {
        font-size: 1.35rem;
    }

    .quick-actions {
        grid-template-columns: 1fr;
        gap: 0.75rem;
    }

    .action-card {
        padding: 1.1rem;
    }

    .hero-title {
        font-size: 1.6rem;
    }

    .ai-panel {
        width: 100vw;
        right: 0;
        border-radius: 20px 20px 0 0;
    }

    .ai-message {
        max-width: 90%;
    }

    .collectivite-card {
        padding: 1rem;
    }

    .projet-card {
        padding: 1rem;
    }
}

/* Samsung Galaxy A series / Budget Android (360px) */
@media (max-width: 360px) {
    .header {
        padding: 0.6rem;
    }

    .logo {
        gap: 0.5rem;
    }

    .logo-text {
        font-size: 1.1rem;
    }

    .logo-subtitle {
        font-size: 0.65rem;
        letter-spacing: 1px;
    }

    .logo-icon {
        width: 36px;
        height: 36px;
        font-size: 1.1rem;
        border-radius: 10px;
    }

    .nav-tabs {
        padding: 0.15rem;
        gap: 0.15rem;
    }

    .nav-tab {
        padding: 0.45rem;
        font-size: 0.9rem;
    }

    .nav-tab i {
        font-size: 0.95rem;
    }

    .main-container {
        padding: 105px 0.6rem 0.6rem;
    }

    .hero-badge {
        font-size: 0.7rem;
        padding: 0.35rem 0.7rem;
    }

    .hero-title {
        font-size: 1.35rem;
        line-height: 1.3;
    }

    .hero-desc {
        font-size: 0.85rem;
    }

    .stats-grid {
        grid-template-columns: 1fr 1fr;
        gap: 0.5rem;
    }

    .stat-card {
        padding: 0.65rem;
    }

    .stat-icon {
        width: 32px;
        height: 32px;
        font-size: 0.9rem;
    }

    .stat-value {
        font-size: 1.1rem;
    }

    .stat-label {
        font-size: 0.65rem;
    }

    .action-card {
        padding: 0.85rem;
    }

    .action-icon {
        width: 45px;
        height: 45px;
        font-size: 1.2rem;
    }

    .action-title {
        font-size: 0.95rem;
    }

    .action-desc {
        font-size: 0.8rem;
    }

    .search-box {
        padding: 0 0.75rem;
    }

    .search-input {
        font-size: 0.9rem;
        padding: 0.85rem 0.85rem 0.85rem 2.5rem;
    }

    .filter-chip {
        font-size: 0.75rem;
        padding: 0.4rem 0.7rem;
    }

    .ai-toggle {
        width: 50px;
        height: 50px;
        font-size: 1.1rem;
        bottom: 1rem;
        right: 1rem;
    }

    .ai-header {
        padding: 0.85rem;
    }

    .ai-name {
        font-size: 0.95rem;
    }

    .ai-suggestions {
        gap: 0.35rem;
        padding: 0.5rem;
    }

    .ai-suggestion {
        font-size: 0.7rem;
        padding: 0.35rem 0.6rem;
    }

    .ai-input {
        font-size: 0.9rem;
        padding: 0.7rem;
    }

    .login-container {
        padding: 0.75rem;
    }

    .login-card {
        padding: 1.5rem 1.25rem;
        border-radius: 20px;
    }

    .login-emblem {
        width: 70px;
        height: 70px;
        font-size: 1.75rem;
        margin-bottom: 1.5rem;
    }

    .login-title {
        font-size: 1.4rem;
    }

    .login-subtitle {
        font-size: 0.9rem;
    }

    .login-input {
        padding: 0.85rem 1rem;
        font-size: 0.95rem;
    }

    .login-btn {
        padding: 0.95rem 1.5rem;
        font-size: 1rem;
    }

    .validation-widget {
        padding: 1rem;
    }

    .archive-widget {
        padding: 0.85rem;
    }

    .fiche-kpis {
        gap: 0.5rem;
    }

    .fiche-kpi {
        padding: 0.7rem;
    }

    .fiche-kpi-label {
        font-size: 0.65rem;
    }

    .fiche-kpi-value {
        font-size: 0.9rem;
    }
}

/* Orientation paysage pour smartphones Android */
@media (max-height: 500px) and (orientation: landscape) {
    .header {
        padding: 0.5rem 1rem;
    }

    .logo-icon {
        width: 36px;
        height: 36px;
    }

    .logo-text {
        font-size: 1.2rem;
    }

    .main-container {
        padding-top: 70px;
    }

    .hero-section {
        padding: 1rem;
    }

    .hero-title {
        font-size: 1.5rem;
    }

    .stats-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 0.5rem;
    }

    .stat-card {
        padding: 0.5rem;
    }

    .stat-icon {
        width: 30px;
        height: 30px;
    }

    .stat-value {
        font-size: 1.1rem;
    }

    .quick-actions {
        grid-template-columns: repeat(3, 1fr);
    }

    .action-card {
        padding: 0.75rem;
    }

    .login-overlay {
        overflow-y: auto;
    }

    .login-card {
        padding: 1.5rem;
    }

    .login-emblem {
        width: 60px;
        height: 60px;
        margin-bottom: 1rem;
    }

    .ai-panel {
        height: 90vh;
    }
}

/* Touch-friendly améliorations pour tous les appareils tactiles */
@media (hover: none) and (pointer: coarse) {
    .nav-tab,
    .action-card,
    .filter-chip,
    .collectivite-card,
    .projet-card,
    .ai-suggestion,
    .validation-cta,
    .archive-item {
        -webkit-tap-highlight-color: rgba(201, 162, 39, 0.2);
    }

    .nav-tab:active,
    .action-card:active,
    .filter-chip:active {
        transform: scale(0.98);
        transition: transform 0.1s ease;
    }

    /* Plus gros boutons pour le tactile */
    .ai-send {
        min-width: 48px;
        min-height: 48px;
    }

    .ai-close {
        min-width: 44px;
        min-height: 44px;
    }

    .ai-toggle {
        min-width: 56px;
        min-height: 56px;
    }

    /* Meilleur espacement pour les liens et boutons */
    .archive-item {
        padding: 0.85rem;
        min-height: 48px;
    }

    .filter-chip {
        min-height: 40px;
    }
}

/* ======================== */
/* MODULE PATRIMOINE (v6)   */
/* ======================== */
.patrimoine-header { margin-bottom: 1.5rem; }
.patrimoine-subtitle { color: var(--text-muted); font-size: 0.9rem; margin-top: 0.25rem; }

.patrimoine-kpis {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    margin-bottom: 1.5rem;
}
@media (max-width: 768px) {
    .patrimoine-kpis { grid-template-columns: repeat(2, 1fr); }
}

.kpi-card-patrimoine {
    background: var(--primary-light);
    border: 1px solid var(--primary);
    border-radius: 12px;
    padding: 1.25rem;
}
.kpi-label-patrimoine {
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.85);
    background: rgba(255, 255, 255, 0.15);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    display: inline-block;
    margin-bottom: 0.5rem;
}
.kpi-value-patrimoine {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.5rem;
    font-weight: 700;
    color: #ffffff;
}

.patrimoine-filters {
    display: flex;
    gap: 1rem;
    align-items: flex-end;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
}
.filter-group { flex: 1; min-width: 150px; }
.filter-group-label {
    display: block;
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
}
.filter-select-patrimoine, .filter-input-patrimoine {
    width: 100%;
    padding: 0.75rem 1rem;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text-primary);
    font-family: inherit;
    font-size: 0.9rem;
}
.filter-select-patrimoine:focus, .filter-input-patrimoine:focus {
    outline: none;
    border-color: var(--secondary);
}
.filter-action { flex: 0 0 auto; }

.batiments-table-header {
    display: grid;
    grid-template-columns: 2fr 2fr 1.5fr 1fr;
    gap: 1rem;
    padding: 0.75rem 1rem;
    background: var(--bg-elevated);
    border-radius: 10px 10px 0 0;
    border: 1px solid var(--border);
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
}
@media (max-width: 768px) {
    .batiments-table-header { display: none; }
}

.batiments-list { border: 1px solid var(--border); border-top: none; border-radius: 0 0 10px 10px; }

.batiment-row {
    display: grid;
    grid-template-columns: 2fr 2fr 1.5fr 1fr;
    gap: 1rem;
    padding: 1rem;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border);
    align-items: center;
}
@media (max-width: 768px) {
    .batiment-row { grid-template-columns: 1fr; gap: 0.75rem; }
}
.batiment-row:last-child { border-bottom: none; border-radius: 0 0 10px 10px; }
.batiment-row:hover { background: var(--bg-elevated); }

.batiment-name { font-weight: 700; color: #93c5fd; font-size: 0.95rem; text-shadow: 0 0 8px rgba(147, 197, 253, 0.3); }
.batiment-meta { font-size: 0.8rem; color: #a0aec0; margin-top: 0.25rem; }
.batiment-profil { font-size: 0.85rem; color: var(--text-secondary); }
.profil-line { margin-bottom: 0.25rem; }
.profil-line strong { color: var(--text-primary); }

.audit-badge {
    display: inline-block;
    padding: 0.2rem 0.5rem;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 500;
    margin-top: 0.25rem;
}
.audit-recent { background: rgba(45, 106, 79, 0.4); color: #52b788; border: 1px solid #40916c; font-weight: 500; }
.audit-warning { background: rgba(255, 107, 53, 0.45); color: #ffb380; border: 1px solid #ff8c57; font-weight: 600; }

.opportunites-badge-patrimoine {
    display: inline-block;
    padding: 0.3rem 0.75rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
}
.opp-eligible-patrimoine { background: rgba(30, 58, 95, 0.8); color: #ffffff; border: 1px solid var(--primary-light); font-weight: 600; }
.opp-none-patrimoine { background: var(--bg-elevated); color: var(--text-muted); border: 1px solid var(--border); }
.opportunites-hint { font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem; }

.batiment-actions { display: flex; gap: 0.5rem; flex-wrap: wrap; }
.btn-ouvrir {
    padding: 0.5rem 1rem;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-secondary);
    font-family: inherit;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.3s;
}
.btn-ouvrir:hover { border-color: var(--secondary); color: var(--secondary); }
.btn-analyser {
    padding: 0.5rem 1rem;
    background: var(--primary-light);
    border: none;
    border-radius: 8px;
    color: white;
    font-family: inherit;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
}
.btn-analyser:hover { background: var(--primary); }

/* Fiche Bâtiment */
.fiche-bat-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1.5rem;
    gap: 1rem;
    flex-wrap: wrap;
}
.fiche-bat-meta { color: var(--text-muted); font-size: 0.9rem; margin-top: 0.25rem; }
.fiche-bat-actions { display: flex; gap: 0.75rem; flex-wrap: wrap; }
.fiche-bat-content { display: grid; grid-template-columns: 1fr 1.5fr; gap: 1.5rem; }
@media (max-width: 900px) {
    .fiche-bat-content { grid-template-columns: 1fr; }
}

.fiche-bat-synthese {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.5rem;
}
.synthese-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1.5rem;
}
.synthese-title { font-size: 1.1rem; font-weight: 700; color: var(--primary-light); }
.synthese-subtitle { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.25rem; }
.synthese-badge-fiche {
    padding: 0.3rem 0.75rem;
    background: rgba(160, 174, 192, 0.2);
    border: 1px solid var(--text-muted);
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-muted);
}
.synthese-badge-active {
    background: rgba(45, 106, 79, 0.2);
    border-color: var(--accent);
    color: var(--accent-light);
}
.synthese-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}
.synthese-label { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem; }
.synthese-value { font-size: 0.95rem; font-weight: 500; color: var(--text-primary); }
.synthese-highlight { color: var(--primary-light); font-weight: 600; }
.synthese-actions {
    display: flex;
    gap: 0.75rem;
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
    flex-wrap: wrap;
}

/* Opportunités Cards */
.opportunites-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
    flex-wrap: wrap;
    gap: 1rem;
}
.opportunites-title { font-size: 1.1rem; font-weight: 700; color: var(--primary-light); }
.opportunites-subtitle { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.25rem; }
.opportunites-mes-projets-hint { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.35rem; margin-bottom: 0; }
.opportunites-mes-projets-hint a { color: var(--secondary); text-decoration: none; }
.opportunites-mes-projets-hint a:hover { text-decoration: underline; }
.opportunites-cards { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
@media (max-width: 768px) {
    .opportunites-cards { grid-template-columns: 1fr; }
}

.opp-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.25rem;
}
.opp-card-title { font-size: 1rem; font-weight: 700; color: var(--primary-light); margin-bottom: 0.75rem; }
.opp-badges { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem; }
.opp-badge {
    padding: 0.2rem 0.6rem;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 500;
}
.opp-eligible { background: rgba(30, 58, 95, 0.8); color: #ffffff; border: 1px solid var(--primary-light); font-weight: 600; }
.opp-cat { background: rgba(201, 162, 39, 0.2); color: var(--secondary); border: 1px solid var(--secondary); }
.opp-complexity-low { background: rgba(45, 106, 79, 0.35); color: #52b788; font-weight: 500; }
.opp-complexity-medium { background: rgba(201, 162, 39, 0.15); color: var(--secondary); }
.opp-complexity-high { background: rgba(255, 107, 53, 0.2); color: var(--accent-orange); }
.opp-version { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.75rem; }
.opp-desc { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem; }
.opp-metrics { margin-bottom: 1rem; }
.opp-metric {
    display: inline-block;
    padding: 0.3rem 0.6rem;
    background: var(--bg-elevated);
    border-radius: 8px;
    font-size: 0.75rem;
    margin-right: 0.5rem;
    margin-bottom: 0.5rem;
}
.opp-metric span { color: var(--text-muted); }
.opp-metric strong { color: var(--text-primary); }
.opp-checklist { margin-bottom: 1rem; }
.opp-checklist-title { font-size: 0.8rem; font-weight: 600; margin-bottom: 0.5rem; }
.opp-checklist ul { list-style: disc; padding-left: 1.25rem; font-size: 0.8rem; color: var(--text-secondary); }
.opp-checklist li { margin-bottom: 0.25rem; }
.piece-opt { font-weight: 500; color: var(--text-muted); }
.piece-oblig { font-weight: 600; color: var(--text-primary); }
.opp-card-actions { display: flex; gap: 0.5rem; flex-wrap: wrap; }
.btn-voir-detail {
    padding: 0.5rem 1rem;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-secondary);
    font-family: inherit;
    font-size: 0.85rem;
    cursor: pointer;
}
.btn-voir-detail:hover { border-color: var(--secondary); color: var(--secondary); }
.btn-ajouter-projet {
    padding: 0.5rem 1rem;
    background: var(--secondary);
    border: none;
    border-radius: 8px;
    color: #0d1b2a;
    font-family: inherit;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
}

.btn-danger {
    padding: 0.85rem 1.5rem;
    background: var(--danger);
    border: none;
    border-radius: 12px;
    color: white;
    font-family: inherit;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.btn-danger-outline {
    padding: 0.5rem 1rem;
    background: transparent;
    border: 1px solid var(--danger, #dc3545);
    border-radius: 8px;
    color: var(--danger, #dc3545);
    font-family: inherit;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
}
.btn-danger-outline:hover {
    background: rgba(220, 53, 69, 0.1);
}

/* Modal styles */
.modal-patrimoine {
    position: fixed;
    inset: 0;
    z-index: 1000;
    display: none;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
}
.modal-patrimoine.open { display: flex; }
.modal-content-patrimoine {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 20px;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    overflow-y: auto;
}
.modal-header-patrimoine {
    padding: 1.5rem;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.modal-title-patrimoine { font-size: 1.25rem; font-weight: 700; }
.modal-close-patrimoine {
    width: 36px; height: 36px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}
.modal-close-patrimoine:hover { background: var(--danger); color: white; border-color: var(--danger); }
.modal-body-patrimoine { padding: 1.5rem; }
.modal-footer-patrimoine {
    padding: 1.5rem;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
}

.form-group-patrimoine { margin-bottom: 1.25rem; }
.form-label-patrimoine {
    display: block;
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
}
.form-input-patrimoine, .form-select-patrimoine {
    width: 100%;
    padding: 0.85rem 1rem;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text-primary);
    font-family: inherit;
    font-size: 0.95rem;
}
.form-input-patrimoine:focus, .form-select-patrimoine:focus {
    outline: none;
    border-color: var(--secondary);
}
.form-row-patrimoine { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
@media (max-width: 500px) {
    .form-row-patrimoine { grid-template-columns: 1fr; }
}

/* Toast notification */
.toast-patrimoine {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-left: 4px solid var(--secondary);
    border-radius: 12px;
    padding: 1rem 1.5rem;
    display: none;
    z-index: 2000;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}
.toast-patrimoine.show { display: flex; align-items: center; gap: 1rem; }
.toast-icon { color: var(--secondary); font-size: 1.25rem; }
.toast-title-patrimoine { font-weight: 600; }
.toast-message-patrimoine { font-size: 0.85rem; color: var(--text-muted); }


/* ========================================= */
/* CSS ZONE PRIVÉE (Collectivité, Patrimoine) */
/* ========================================= */

        /* ======================== */
        /* MA COLLECTIVITE */
        /* ======================== */
        .collectivite-grid {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 2rem;
        }
        @media (max-width: 900px) {
            .collectivite-grid { grid-template-columns: 1fr; }
        }

        /* Sidebar */
        .collectivite-sidebar {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem 1.5rem;
            text-align: center;
            height: fit-content;
            position: relative;
        }
        .collectivite-icon {
            width: 100px; height: 100px;
            margin: 0 auto 1.5rem;
            background: var(--gradient-hero);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: var(--secondary);
            border: 2px solid var(--secondary);
        }
        .collectivite-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
        }
        .collectivite-type-badge {
            display: inline-block;
            padding: 0.4rem 1rem;
            background: rgba(201, 162, 39, 0.2);
            border: 1px solid var(--secondary);
            border-radius: 50px;
            color: var(--secondary);
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
        }
        .collectivite-details { border-top: 1px solid var(--border); padding-top: 1.5rem; }
        .collectivite-detail-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 0;
            text-align: left;
        }
        .collectivite-detail-icon {
            width: 36px; height: 36px;
            border-radius: 10px;
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            flex-shrink: 0;
        }
        .collectivite-detail-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .collectivite-detail-value { font-weight: 600; color: var(--text-primary); }

        /* Main Content */
        .collectivite-main { display: flex; flex-direction: column; gap: 1.5rem; }

        /* Section Cards */
        .section-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 1.5rem;
            position: relative;
        }
        .section-card-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1.25rem;
            color: var(--text-primary);
        }
        .section-card-title i { color: var(--secondary); }

        /* Team Members */
        .team-list { display: flex; flex-direction: column; gap: 0.75rem; }
        .team-member {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: var(--bg-elevated);
            border-radius: 12px;
            border: 1px solid var(--border);
        }
        .team-avatar {
            width: 45px; height: 45px;
            border-radius: 50%;
            background: var(--gradient-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: #0d1b2a;
            font-size: 0.9rem;
        }
        .team-photo-placeholder {
            width: 65px; height: 65px;
            border-radius: 12px;
            background: var(--bg-card);
            border: 2px dashed var(--border);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
            color: var(--text-muted);
            font-size: 0.55rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
        }
        .team-photo-placeholder i { font-size: 1rem; color: var(--secondary); }
        .team-photo-placeholder:hover {
            border-color: var(--secondary);
            background: rgba(201, 162, 39, 0.1);
        }
        .team-photo-placeholder span { line-height: 1.2; padding: 0 0.25rem; }
        .team-info { flex: 1; }
        .team-name { font-weight: 600; font-size: 0.95rem; }
        .team-role { font-size: 0.8rem; color: var(--text-muted); }
        .team-delete {
            width: 30px; height: 30px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        .team-delete:hover { background: var(--danger); color: white; border-color: var(--danger); }
        .editing .team-delete { display: flex; }

        /* Validation Card */
        .validation-card {
            background: linear-gradient(135deg, rgba(201, 162, 39, 0.15), rgba(201, 162, 39, 0.05));
            border: 2px solid var(--secondary);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            position: relative;
        }
        .validation-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.4rem 1rem;
            background: rgba(201, 162, 39, 0.25);
            border-radius: 50px;
            color: var(--secondary);
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }
        .validation-title { font-size: 1.35rem; font-weight: 700; margin-bottom: 0.5rem; }
        .validation-subtitle { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1.5rem; }
        .validation-btn {
            padding: 0.85rem 2rem;
            background: var(--gradient-gold);
            border: none;
            border-radius: 12px;
            color: #0d1b2a;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
        }
        .validation-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 30px var(--glow-accent); }

        /* Historique */
        .historique-list { display: flex; flex-direction: column; gap: 0.75rem; }
        .historique-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-elevated);
            border-radius: 12px;
            border: 1px solid var(--border);
        }
        .historique-icon {
            width: 40px; height: 40px;
            border-radius: 10px;
            background: rgba(201, 162, 39, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
        }
        .historique-info { flex: 1; }
        .historique-month { font-weight: 600; font-size: 0.95rem; }
        .historique-date { font-size: 0.8rem; color: var(--text-muted); }
        .historique-check {
            width: 24px; height: 24px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7rem;
        }
        .historique-delete {
            width: 30px; height: 30px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        .historique-delete:hover { background: var(--danger); color: white; border-color: var(--danger); }
        .editing .historique-delete { display: flex; }
        .editing .historique-check { display: none; }

        /* Add Button */
        .add-item-btn {
            width: 100%;
            padding: 0.75rem;
            background: transparent;
            border: 2px dashed var(--border);
            border-radius: 12px;
            color: var(--text-muted);
            font-family: inherit;
            font-size: 0.9rem;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
            transition: all 0.3s;
        }
        .add-item-btn:hover {
            border-color: var(--secondary);
            color: var(--secondary);
            background: rgba(201, 162, 39, 0.1);
        }
        .editing .add-item-btn { display: flex; }

        /* ======================== */
        /* ADMINISTRATION */
        /* ======================== */
        .admin-dashboard {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        .admin-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
        }
        .admin-content h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--secondary);
        }
        .action-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .action-card:hover {
            border-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(201, 162, 39, 0.15);
        }
        .admin-cards-grid .action-icon {
            font-size: 2rem;
            color: var(--secondary);
            margin-bottom: 1rem;
        }
        .action-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }
        .action-desc {
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        .batiment-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            align-items: center;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
        }
        .batiment-row:hover {
            border-color: var(--secondary);
        }
        .badge {
            padding: 0.25rem 0.6rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .badge.opp-eligible {
            background: rgba(45, 106, 79, 0.2);
            color: var(--accent-light);
        }
        .badge.opp-none {
            background: rgba(113, 128, 150, 0.2);
            color: var(--text-muted);
        }

        /* ======================== */
        /* HISTORIQUE / LOGS */
        /* ======================== */
        .log-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        .log-table th, .log-table td {
            border: 1px solid var(--border);
            padding: 0.6rem 0.8rem;
            text-align: left;
        }
        .log-table th {
            background: var(--bg-elevated);
            color: var(--text-secondary);
            font-weight: 600;
        }
        .log-table tbody tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        #logsChart {
            width: 100%;
            max-height: 260px;
        }
        .stats-card {
            transition: transform 0.2s ease;
        }
        .stats-card:hover {
            transform: translateY(-3px);
        }

        /* ======================== */
        /* RAPPORTS ANALYTICS */
        /* ======================== */
        .rapports-table th, .rapports-table td {
            border: 1px solid var(--border);
            padding: 0.6rem;
            font-size: 0.9rem;
        }
        .rapports-table th {
            background: var(--bg-elevated);
            color: var(--text-secondary);
            font-weight: 600;
        }
        .rapports-table tr:hover {
            background: rgba(201, 162, 39, 0.08);
        }

        /* ======================== */
        /* NOTIFICATION TOAST (EVENT BUS) */
        /* ======================== */
        #notifToast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--gradient-card);
            border: 1px solid var(--secondary);
            color: var(--text-primary);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease;
            z-index: 9999;
        }
        #notifToast.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* ======================== */
        /* MODALES ADMINISTRATEUR */
        /* ======================== */
        .admin-modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(13, 27, 42, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            transition: opacity 0.3s ease;
        }
        .admin-modal-overlay.hidden {
            display: none;
        }
        .admin-modal-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            width: 400px;
            max-width: 90%;
            padding: 1.5rem 2rem;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }
        .admin-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border);
        }
        .admin-modal-header h3 {
            font-size: 1.1rem;
            color: var(--secondary);
            margin: 0;
        }
        .admin-modal-close {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 1.1rem;
            cursor: pointer;
            transition: color 0.2s;
        }
        .admin-modal-close:hover {
            color: var(--danger);
        }
        .admin-modal-body {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        .admin-modal-body label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: -0.4rem;
        }
        .admin-modal-body input,
        .admin-modal-body select {
            padding: 0.6rem 0.8rem;
            border-radius: 8px;
            font: inherit;
            border: 1px solid var(--border);
            background: var(--bg-elevated);
            color: var(--text-primary);
        }
        .admin-modal-body input:focus,
        .admin-modal-body select:focus {
            outline: none;
            border-color: var(--secondary);
        }
        .modal-actions {
            text-align: right;
            margin-top: 1rem;
        }

        /* ======================== */
        /* CONSOLE DE SUPERVISION */
        /* ======================== */
        #liveUsersTable {
            max-height: 300px;
            overflow-y: auto;
        }
        .activity-status {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.85rem;
        }
        .badge-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        .badge-online {
            background: #2d6a4f;
        }
        .badge-idle {
            background: #c9a227;
            animation: none;
        }
        .badge-offline {
            background: #991b1b;
            animation: none;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .log-time {
            color: var(--text-muted);
            font-size: 0.75rem;
        }
        .supervision-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        .live-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            color: var(--accent-light);
        }
        .live-dot {
            width: 8px;
            height: 8px;
            background: #2d6a4f;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        /* ======================== */
        /* MODALS */
        /* ======================== */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        .modal-overlay.open { display: flex; }
        .modal-content {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            width: 100%;
            max-width: 480px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalIn 0.3s ease;
        }
        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .modal-header {
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }
        .modal-title { font-size: 1.25rem; font-weight: 600; }
        .form-modal-subtitle { font-size: 0.85rem; color: var(--text-muted); margin-top: 0.25rem; margin-bottom: 0; max-width: 32rem; }
        .modal-close {
            width: 36px; height: 36px;
            background: var(--bg-elevated);
            border: none;
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            transition: all 0.3s;
        }
        .modal-close:hover { background: var(--danger); color: white; }
        .modal-body { padding: 1.5rem; }
        .modal-icon {
            width: 70px; height: 70px;
            margin: 0 auto 1.5rem;
            background: var(--gradient-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            color: #0d1b2a;
        }
        .modal-heading { text-align: center; font-size: 1.35rem; font-weight: 700; margin-bottom: 0.5rem; }
        .modal-subheading { text-align: center; color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 2rem; }
        .form-group { margin-bottom: 1.25rem; }
        .form-label {
            display: block;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            color: var(--text-primary);
            transition: border-color 0.3s;
        }
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--secondary);
        }
        .form-textarea { resize: vertical; min-height: 80px; }
        .form-textarea::placeholder { color: var(--text-muted); }
        .signature-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(45, 106, 79, 0.15);
            border: 1px solid var(--accent);
            border-radius: 12px;
            margin-top: 1.5rem;
        }
        .signature-icon {
            width: 40px; height: 40px;
            background: var(--accent);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
        }
        .signature-text strong { display: block; margin-bottom: 0.2rem; }
        .signature-text { font-size: 0.85rem; color: var(--text-secondary); }
        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }
        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 0;
        }
        .form-row .form-group { flex: 1; }
        .btn {
            padding: 0.85rem 1.5rem;
            border-radius: 12px;
            font-family: inherit;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
        }
        .btn-secondary {
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            color: var(--text-secondary);
        }
        .btn-secondary:hover { border-color: var(--text-muted); color: var(--text-primary); }
        .btn-primary {
            background: var(--gradient-gold);
            border: none;
            color: #0d1b2a;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 20px var(--glow-accent); }
        .btn-danger {
            background: var(--danger);
            border: none;
            color: white;
        }

        /* ======================== */
        /* PROJETS */
        /* ======================== */
        .projets-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .section-title i { color: var(--secondary); }
        .projets-count { color: var(--text-secondary); font-size: 0.9rem; }
        .projets-count strong { color: var(--secondary); }
        .projets-section-label { font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--secondary); margin: 0 0 0.25rem 0; }
        .btn-creer-projet { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.2); color: var(--text-primary); }
        .btn-creer-projet:hover { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.3); }
        .light .btn-creer-projet { background: rgba(0,0,0,0.04); border-color: rgba(0,0,0,0.12); color: var(--text-primary); }
        .light .btn-creer-projet:hover { background: rgba(0,0,0,0.08); border-color: rgba(0,0,0,0.2); }
        .filters-container {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
        }
        .filters-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            align-items: center;
        }
        .filter-label { font-size: 0.85rem; color: var(--text-secondary); font-weight: 500; }
        .filter-chip {
            padding: 0.5rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 50px;
            font-size: 0.85rem;
            font-family: inherit;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .filter-chip:hover, .filter-chip.active {
            background: var(--secondary);
            color: #0d1b2a;
            border-color: var(--secondary);
        }
        .filter-search {
            flex: 1;
            min-width: 200px;
            padding: 0.5rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 0.9rem;
            font-family: inherit;
            color: var(--text-primary);
        }
        .filter-search:focus { outline: none; border-color: var(--secondary); }
        .filter-search::placeholder { color: var(--text-muted); }
        .projets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.25rem;
        }
        .projet-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 18px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .projet-card:hover {
            transform: translateY(-4px);
            border-color: var(--secondary);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
        }
        .projet-header {
            padding: 0.85rem;
            background: linear-gradient(135deg, rgba(30, 58, 95, 0.25), rgba(201, 162, 39, 0.1));
            border-bottom: 1px solid var(--border);
        }
        .projet-status {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.25rem 0.55rem;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 0.4rem;
        }
        .projet-status.creation { background: rgba(201,162,39,0.35); color: #0d1b2a; }
        .projet-status.etude { background: var(--accent-orange); color: white; }
        .projet-status.travaux { background: var(--primary-light); color: white; }
        .projet-status.termine { background: var(--accent); color: white; }
        .projet-status::before {
            content: '';
            width: 6px; height: 6px;
            background: currentColor;
            border-radius: 50%;
            animation: blink 1.5s infinite;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        .projet-title { font-size: 1rem; font-weight: 600; line-height: 1.35; }
        .eligible-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.25rem 0.6rem;
            background: rgba(45, 106, 79, 0.25);
            border: 1px solid var(--accent);
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 500;
            color: var(--accent-light);
            margin-bottom: 0.5rem;
        }
        .eligible-chip { background: rgba(45, 106, 79, 0.45) !important; border-color: #40916c !important; color: #52b788 !important; font-weight: 500; }
        .eligible-chip:hover, .eligible-chip.active { background: var(--accent) !important; color: white !important; }
        .projet-body { padding: 0.85rem; }
        .projet-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        .projet-info i { color: var(--secondary); width: 16px; }
        .projet-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 0.65rem;
            border-top: 1px solid var(--border);
            margin-top: 0.5rem;
        }
        .projet-budget { font-family: 'JetBrains Mono', monospace; font-weight: 600; color: var(--secondary); }
        .projet-cta { display: flex; align-items: center; gap: 0.4rem; font-size: 0.85rem; color: var(--secondary); font-weight: 500; }

        /* FICHE PROJET */
        .fiche-back {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        .fiche-back:hover { color: var(--secondary); }
        .fiche-container {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 2rem;
        }
        @media (max-width: 900px) {
            .fiche-container { grid-template-columns: 1fr; }
        }
        .fiche-sidebar {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 1.5rem;
            height: fit-content;
        }
        .fiche-status-large {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.6rem 1rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }
        .fiche-status-large.etude { background: var(--accent-orange); color: white; }
        .fiche-status-large.travaux { background: var(--primary-light); color: white; }
        .fiche-status-large.termine { background: var(--accent); color: white; }
        .fiche-title { font-size: 1.35rem; font-weight: 700; margin-bottom: 1.5rem; text-align: center; }
        .fiche-detail {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.85rem 0;
            border-bottom: 1px solid var(--border);
        }
        .fiche-detail:last-child { border-bottom: none; }
        .fiche-detail-icon {
            width: 36px; height: 36px;
            border-radius: 10px;
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            flex-shrink: 0;
        }
        .fiche-detail-content { flex: 1; }
        .fiche-detail-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 0.2rem; }
        .fiche-detail-value { font-weight: 500; font-size: 0.95rem; }
        .fiche-main { display: flex; flex-direction: column; gap: 1.5rem; }
        .fiche-section {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 1.5rem;
        }
        .fiche-section-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }
        .fiche-section-title i { color: var(--secondary); }

        /* Progress Bars */
        .progress-bars-container { display: flex; flex-direction: column; gap: 1.25rem; margin-bottom: 1.5rem; }
        .progress-bar-item { display: flex; align-items: center; gap: 1rem; }
        .progress-bar-label { min-width: 80px; font-size: 0.95rem; font-weight: 500; }
        .progress-bar-track { flex: 1; height: 12px; background: var(--bg-elevated); border-radius: 6px; overflow: hidden; }
        .progress-bar-fill { height: 100%; border-radius: 6px; transition: width 0.8s ease; }
        .progress-bar-fill.etudes { background: linear-gradient(90deg, #b45309, #d97706); }
        .progress-bar-fill.travaux { background: linear-gradient(90deg, #c9a227, #d4b545); }
        .progress-bar-value { min-width: 50px; text-align: right; font-family: 'JetBrains Mono', monospace; font-weight: 600; }

        /* Timeline */
        .timeline { position: relative; padding-left: 2rem; }
        .timeline::before { content: ''; position: absolute; left: 7px; top: 0; bottom: 0; width: 2px; background: var(--border); }
        .timeline-item { position: relative; padding-bottom: 1.5rem; }
        .timeline-item:last-child { padding-bottom: 0; }
        .timeline-dot {
            position: absolute;
            left: -2rem; top: 0;
            width: 16px; height: 16px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 3px solid var(--text-muted);
        }
        .timeline-item.completed .timeline-dot { background: var(--accent); border-color: var(--accent); }
        .timeline-item.active .timeline-dot { background: var(--secondary); border-color: var(--secondary); box-shadow: 0 0 0 4px var(--glow-accent); }
        .timeline-content { background: var(--bg-elevated); border-radius: 10px; padding: 0.85rem 1rem; }
        .timeline-date { font-size: 0.75rem; color: var(--text-muted); }
        .timeline-label { font-weight: 600; }

        /* Budget Grid */
        .budget-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        .budget-item { background: var(--bg-elevated); border-radius: 12px; padding: 1rem; text-align: center; }
        .budget-label { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.5rem; }
        .budget-value { font-size: 1.5rem; font-weight: 700; font-family: 'JetBrains Mono', monospace; color: var(--secondary); }

        /* Partners */
        .partner-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.85rem;
            background: var(--bg-elevated);
            border-radius: 12px;
            margin-bottom: 0.75rem;
        }
        .partner-item:last-child { margin-bottom: 0; }
        .partner-logo {
            width: 45px; height: 45px;
            border-radius: 10px;
            background: var(--gradient-hero);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            color: var(--secondary);
            border: 1px solid var(--secondary);
        }
        .partner-info { flex: 1; }
        .partner-name { font-weight: 600; font-size: 0.9rem; }
        .partner-type { font-size: 0.75rem; color: var(--text-muted); }
        .partner-amount { font-family: 'JetBrains Mono', monospace; font-weight: 600; color: var(--secondary); text-align: right; }
        .partner-percent { font-size: 0.75rem; color: var(--text-muted); text-align: right; }
        .budget-total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem 0 0;
            margin-top: 1rem;
            border-top: 1px solid var(--border);
        }
        .budget-total-value { font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; font-weight: 700; color: var(--secondary); }

        /* Pagination */
        .pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 2rem;
            padding: 1rem 0;
        }
        .pagination-btn {
            padding: 0.6rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .pagination-btn:hover { border-color: var(--secondary); color: var(--secondary); }
        .pagination-btn.active { background: var(--gradient-gold); color: #0d1b2a; border-color: var(--secondary); }
        .pagination-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .pagination-info { color: var(--text-muted); font-size: 0.85rem; margin: 0 1rem; }

        /* Section Placeholder */
        .section-placeholder {
            background: var(--bg-card);
            border: 2px dashed var(--border);
            border-radius: 20px;
            padding: 3rem 2rem;
            text-align: center;
            max-width: 600px;
            margin: 2rem auto;
        }
        .placeholder-icon {
            width: 80px; height: 80px;
            margin: 0 auto 1.5rem;
            background: var(--gradient-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #0d1b2a;
        }
        .section-placeholder h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        .section-placeholder p {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        .placeholder-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            text-align: left;
        }
        .placeholder-feature {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        .placeholder-feature i { color: var(--accent); }

        /* ======================== */
        /* CATALOGUE ET CONFORMITÉ */
        /* ======================== */
        .catalogue-grid {
            display: grid;
            grid-template-columns: 1.2fr 1fr;
            gap: 2rem;
        }
        .catalogue-column {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        .catalogue-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        .catalogue-title {
            font-size: 1.15rem;
            font-weight: 700;
            color: var(--text-primary);
        }
        .catalogue-subtitle {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }
        .btn-reload {
            padding: 0.5rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-reload:hover {
            border-color: var(--secondary);
            color: var(--secondary);
        }

        /* Mesure Cards */
        .mesure-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
        }
        .mesure-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
        }
        .mesure-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .mesure-tag {
            padding: 0.2rem 0.6rem;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
        }
        .tag-code { background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border); }
        .tag-category { background: rgba(44, 82, 130, 0.2); color: var(--primary-light); }
        .tag-complexity-low { background: rgba(45, 106, 79, 0.4); color: #52b788; font-weight: 500; }
        .tag-complexity-medium { background: rgba(201, 162, 39, 0.2); color: var(--secondary); }
        .tag-complexity-high { background: rgba(180, 83, 9, 0.2); color: var(--accent-orange); }
        .mesure-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.75rem;
            font-size: 0.75rem;
        }
        .mesure-meta span {
            color: var(--text-muted);
        }
        .mesure-meta strong {
            color: var(--text-secondary);
        }
        .mesure-status {
            padding: 0.15rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .status-active { background: rgba(45, 106, 79, 0.4); color: #52b788; font-weight: 500; }
        .status-inactive { background: rgba(153, 27, 27, 0.2); color: #ef4444; }
        .mesure-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 1rem;
        }
        .mesure-checklist-title {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }
        .mesure-checklist {
            list-style: none;
            padding: 0;
            margin: 0 0 1rem 0;
        }
        .mesure-checklist li {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
            padding: 0.25rem 0;
        }
        .mesure-checklist .check-oblig {
            color: var(--secondary);
            font-weight: 600;
        }
        .mesure-checklist .check-opt {
            color: var(--text-muted);
        }
        .mesure-checklist li::before {
            content: '•';
            color: var(--text-muted);
        }
        .mesure-reference {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
        }
        .mesure-reference-label {
            color: var(--text-muted);
        }
        .mesure-reference-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            background: var(--bg-elevated);
            border-radius: 4px;
            color: var(--text-secondary);
            border: 1px dashed var(--border);
        }

        /* Conformité Column */
        .conformite-box {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
        }
        .conformite-info {
            background: rgba(44, 82, 130, 0.1);
            border: 1px solid var(--primary-light);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        .conformite-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin: 0 0 0.5rem 0;
        }
        .conformite-info p:last-child { margin-bottom: 0; }
        .conformite-info code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            background: var(--bg-elevated);
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            color: var(--secondary);
        }
        .conformite-info .tag-active {
            display: inline-block;
            padding: 0.1rem 0.4rem;
            background: rgba(45, 106, 79, 0.2);
            color: var(--accent-light);
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .btn-bonnes-pratiques {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }
        .btn-bonnes-pratiques:hover {
            border-color: var(--secondary);
            color: var(--secondary);
        }
        .bonnes-pratiques-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .bonnes-pratiques-list li {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.6rem 0;
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
            border-bottom: 1px solid var(--border);
        }
        .bonnes-pratiques-list li:last-child { border-bottom: none; }
        .bonnes-pratiques-list li::before {
            content: '•';
            color: var(--secondary);
            font-weight: bold;
        }
        .bonnes-pratiques-list code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            background: var(--bg-elevated);
            padding: 0.1rem 0.3rem;
            border-radius: 3px;
            color: var(--secondary);
        }

        @media (max-width: 1024px) {
            .catalogue-grid { grid-template-columns: 1fr; }
        }
        @media (max-width: 768px) {
            .catalogue-header { flex-direction: column; align-items: flex-start; gap: 0.75rem; }
            .btn-reload { width: 100%; justify-content: center; }
            .mesure-tags { gap: 0.35rem; }
            .mesure-meta { flex-direction: column; gap: 0.25rem; }
        }

        /* Patrimoine Module */
        .patrimoine-header { margin-bottom: 1.5rem; }
        .patrimoine-subtitle { color: var(--text-muted); font-size: 0.9rem; margin-top: 0.25rem; }
        .patrimoine-intro { color: var(--text-secondary); font-size: 0.9rem; margin: 0 0 1.5rem 0; line-height: 1.5; }
        .patrimoine-intro a { color: var(--secondary); text-decoration: none; font-weight: 500; }
        .patrimoine-intro a:hover { text-decoration: underline; }

        .patrimoine-kpis {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .kpi-card {
            background: var(--primary-light);
            border: 1px solid var(--primary);
            border-radius: 12px;
            padding: 1.25rem;
        }
        .kpi-label {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.85);
            background: rgba(255, 255, 255, 0.15);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 0.5rem;
        }
        .kpi-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: #ffffff;
        }
        .kpi-euro { color: #ffffff; }
        .kpi-kwh { color: #ffffff; }
        .kpi-count { color: #ffffff; }

        .patrimoine-filters {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        .filter-group { flex: 1; min-width: 150px; }
        .filter-group-label {
            display: block;
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }
        .filter-select, .filter-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
        }
        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: var(--secondary);
        }
        .filter-action { flex: 0 0 auto; }

        .batiments-table-header {
            display: grid;
            grid-template-columns: 2fr 2fr 1.5fr 1fr;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background: var(--bg-elevated);
            border-radius: 10px 10px 0 0;
            border: 1px solid var(--border);
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .batiments-list { border: 1px solid var(--border); border-top: none; border-radius: 0 0 10px 10px; }

        .batiment-row {
            display: grid;
            grid-template-columns: 2fr 2fr 1.5fr 1fr;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            align-items: center;
        }
        .batiment-row:last-child { border-bottom: none; border-radius: 0 0 10px 10px; }
        .batiment-row:hover { background: var(--bg-elevated); }

        .batiment-name { font-weight: 700; color: #93c5fd; font-size: 0.95rem; text-shadow: 0 0 8px rgba(147, 197, 253, 0.3); }
        .batiment-meta { font-size: 0.8rem; color: #a0aec0; margin-top: 0.25rem; }

        .batiment-profil { font-size: 0.85rem; color: var(--text-secondary); }
        .profil-line { margin-bottom: 0.25rem; }
        .profil-line strong { color: var(--text-primary); }
        .audit-badge {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 500;
            margin-top: 0.25rem;
        }
        .audit-recent { background: rgba(45, 106, 79, 0.4); color: #52b788; border: 1px solid #40916c; font-weight: 500; }
        .audit-warning { background: rgba(255, 107, 53, 0.45); color: #ffb380; border: 1px solid #ff8c57; font-weight: 600; }

        .opportunites-badge {
            display: inline-block;
            padding: 0.3rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .opp-eligible { background: rgba(30, 58, 95, 0.8); color: #ffffff; border: 1px solid var(--primary-light); font-weight: 600; }
        .opp-none { background: var(--bg-elevated); color: var(--text-muted); border: 1px solid var(--border); }
        .opportunites-hint { font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem; }

        .batiment-actions { display: flex; gap: 0.5rem; }
        .btn-ouvrir {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-ouvrir:hover { border-color: var(--secondary); color: var(--secondary); }
        .btn-analyser {
            padding: 0.5rem 1rem;
            background: var(--primary-light);
            border: none;
            border-radius: 8px;
            color: white;
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-analyser:hover { background: var(--primary); }

        /* Fiche Bâtiment */
        .fiche-bat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            gap: 1rem;
            flex-wrap: wrap;
        }
        .fiche-bat-meta { color: var(--text-muted); font-size: 0.9rem; margin-top: 0.25rem; }
        .fiche-bat-actions { display: flex; gap: 0.75rem; }
        .fiche-bat-content { display: grid; grid-template-columns: 1fr 1.5fr; gap: 1.5rem; }

        .fiche-bat-synthese {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
        }
        .synthese-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }
        .synthese-title { font-size: 1.1rem; font-weight: 700; color: var(--primary-light); }
        .synthese-subtitle { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.25rem; }
        .synthese-badge {
            padding: 0.3rem 0.75rem;
            background: rgba(160, 174, 192, 0.2);
            border: 1px solid var(--text-muted);
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
        }
        .synthese-badge-active {
            background: rgba(45, 106, 79, 0.2);
            border-color: var(--accent);
            color: var(--accent-light);
        }
        .synthese-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        .synthese-label { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem; }
        .synthese-value { font-size: 0.95rem; font-weight: 500; color: var(--text-primary); }
        .synthese-highlight { color: var(--primary-light); font-weight: 600; }
        .synthese-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }
        .btn-danger {
            padding: 0.85rem 1.5rem;
            background: var(--danger);
            border: none;
            border-radius: 12px;
            color: white;
            font-family: inherit;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .opportunites-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        .opportunites-title { font-size: 1.1rem; font-weight: 700; color: var(--primary-light); }
        .opportunites-subtitle { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.25rem; }
        .opportunites-mes-projets-hint { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.35rem; margin-bottom: 0; }
        .opportunites-mes-projets-hint a { color: var(--secondary); text-decoration: none; }
        .opportunites-mes-projets-hint a:hover { text-decoration: underline; }
        .opportunites-cards { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        .opportunites-note { font-size: 0.75rem; color: var(--text-muted); margin-top: 1rem; }

        .opp-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
        }
        .opp-card-title { font-size: 1rem; font-weight: 700; color: var(--primary-light); margin-bottom: 0.75rem; }
        .opp-badges { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem; }
        .opp-badge {
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 500;
        }
        .opp-eligible { background: rgba(30, 58, 95, 0.8); color: #ffffff; border: 1px solid var(--primary-light); font-weight: 600; }
        .opp-cat { background: rgba(201, 162, 39, 0.2); color: var(--secondary); border: 1px solid var(--secondary); }
        .opp-complexity-low { background: rgba(45, 106, 79, 0.35); color: #52b788; font-weight: 500; }
        .opp-complexity-medium { background: rgba(201, 162, 39, 0.15); color: var(--secondary); }
        .opp-complexity-high { background: rgba(255, 107, 53, 0.2); color: var(--accent-orange); }
        .opp-version { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.75rem; }
        .opp-desc { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 1rem; }
        .opp-metrics { margin-bottom: 1rem; }
        .opp-metric {
            display: inline-block;
            padding: 0.3rem 0.6rem;
            background: var(--bg-elevated);
            border-radius: 8px;
            font-size: 0.75rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .opp-metric span { color: var(--text-muted); }
        .opp-metric strong { color: var(--text-primary); }
        .opp-checklist { margin-bottom: 1rem; }
        .opp-checklist-title { font-size: 0.8rem; font-weight: 600; margin-bottom: 0.5rem; }
        .opp-checklist ul { list-style: disc; padding-left: 1.25rem; font-size: 0.8rem; color: var(--text-secondary); }
        .opp-checklist li { margin-bottom: 0.25rem; }
        .piece-opt { font-weight: 500; color: var(--text-muted); }
        .piece-oblig { font-weight: 600; color: var(--text-primary); }
        .opp-card-actions { display: flex; gap: 0.5rem; }
        .btn-voir-detail {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
        }
        .btn-voir-detail:hover { border-color: var(--secondary); color: var(--secondary); }
        .btn-ajouter-projet {
            padding: 0.5rem 1rem;
            background: var(--secondary);
            border: none;
            border-radius: 8px;
            color: #0d1b2a;
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
        }

        /* Modal Detail */
        .detail-header { display: flex; gap: 1rem; margin-bottom: 1.5rem; }
        .detail-info-box {
            flex: 1;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 0.75rem;
            text-align: center;
        }
        .detail-info-label { font-size: 0.7rem; color: var(--text-muted); margin-bottom: 0.25rem; }
        .detail-info-value { font-size: 0.95rem; font-weight: 600; color: var(--text-primary); }
        .detail-section { margin-bottom: 1.25rem; }
        .detail-section-title { font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem; }
        .detail-section p { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5; }
        .detail-section ul { list-style: disc; padding-left: 1.25rem; font-size: 0.85rem; color: var(--text-secondary); }
        .detail-section li { margin-bottom: 0.25rem; }
        .detail-rules {
            background: var(--bg-elevated);
            border-radius: 8px;
            padding: 0.75rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
            overflow-x: auto;
        }
        .detail-info-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        .detail-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .complexity-low { background: rgba(45, 106, 79, 0.4); color: #52b788; font-weight: 500; }
        .complexity-medium { background: rgba(201, 162, 39, 0.2); color: var(--secondary); }
        .complexity-high { background: rgba(180, 83, 9, 0.2); color: var(--accent-orange); }
        .statut-active { background: rgba(45, 106, 79, 0.45); color: #52b788; font-weight: 600; }
        .statut-inactive { background: rgba(153, 27, 27, 0.2); color: #ef4444; }
        .detail-ref { font-family: 'JetBrains Mono', monospace; color: var(--secondary); }
        .detail-section-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
        }
        .detail-section-title i { color: var(--secondary); }
        .detail-exigences {
            background: var(--bg-elevated);
            border-radius: 10px;
            padding: 1rem;
        }
        .detail-exigences p {
            color: var(--text-secondary);
            font-size: 0.85rem;
            line-height: 1.6;
            margin: 0;
        }
        .detail-checklist {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .checklist-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        /* ======================== */
        /* CARTE GLOBALE STYLES */
        /* ======================== */
        .map-container-global {
            height: calc(100vh - 200px);
            min-height: 500px;
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid var(--border);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        #global-map {
            height: 100%;
            width: 100%;
            background: var(--bg-card);
        }

        .map-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .map-title {
            font-size: 1.75rem;
            font-weight: 700;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .map-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .map-filter-btn {
            padding: 0.6rem 1.2rem;
            border: 1px solid var(--border);
            background: var(--bg-elevated);
            color: var(--text-secondary);
            border-radius: 10px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .map-filter-btn:hover {
            border-color: var(--secondary);
            color: var(--secondary);
        }

        .map-filter-btn.active {
            background: var(--gradient-gold);
            color: #0d1b2a;
            border-color: var(--secondary);
        }

        .map-legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .map-legend-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .map-legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.4rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .map-legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .map-stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .map-stat-item {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
        }

        .map-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--secondary);
        }

        .map-stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        .custom-marker-collectivite {
            background: linear-gradient(135deg, #1e3a5f, #2c5282);
            border: 3px solid #c9a227;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(30, 58, 95, 0.5);
        }

        .custom-marker-projet {
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
            border: 2px solid white;
        }

        .marker-etude { background: linear-gradient(135deg, #b45309, #d97706); }
        .marker-travaux { background: linear-gradient(135deg, #1e3a5f, #2c5282); }
        .marker-termine { background: linear-gradient(135deg, #2d6a4f, #40916c); }

        .leaflet-popup-content-wrapper {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
        }

        .leaflet-popup-content {
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
        }

        .leaflet-popup-tip { background: var(--bg-card); }

        .popup-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }

        .popup-info {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .popup-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-top: 0.5rem;
        }

        .popup-status.etude { background: rgba(180, 83, 9, 0.2); color: #d97706; }
        .popup-status.travaux { background: rgba(30, 58, 95, 0.2); color: #60a5fa; }
        .popup-status.termine { background: rgba(45, 106, 79, 0.4); color: #52b788; font-weight: 500; }

        .popup-btn {
            display: block;
            width: 100%;
            margin-top: 0.75rem;
            padding: 0.5rem;
            background: var(--gradient-gold);
            border: none;
            border-radius: 8px;
            color: #0d1b2a;
            font-family: inherit;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .popup-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px var(--glow-accent);
        }

        /* ======================== */
        /* DÉCRET TERTIAIRE STYLES */
        /* ======================== */
        .decret-tertiaire-banner {
            background: linear-gradient(135deg, rgba(45, 106, 79, 0.2), rgba(64, 145, 108, 0.1));
            border: 2px solid rgba(45, 106, 79, 0.5);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .decret-tertiaire-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #2d6a4f, #40916c, #52b788);
        }

        .decret-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .decret-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.25rem;
            font-weight: 700;
            color: #40916c;
        }

        .decret-badge {
            background: linear-gradient(135deg, #2d6a4f, #40916c);
            color: white;
            padding: 0.35rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .decret-objectifs {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .objectif-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            position: relative;
        }

        .objectif-year {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .objectif-target {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--secondary);
        }

        .objectif-progress {
            margin-top: 0.75rem;
        }

        .objectif-bar {
            height: 8px;
            background: var(--bg-elevated);
            border-radius: 4px;
            overflow: hidden;
        }

        .objectif-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .objectif-fill.on-track { background: linear-gradient(90deg, #2d6a4f, #40916c); }
        .objectif-fill.warning { background: linear-gradient(90deg, #b45309, #d97706); }
        .objectif-fill.danger { background: linear-gradient(90deg, #991b1b, #dc2626); }

        .objectif-status {
            font-size: 0.75rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.35rem;
        }

        .objectif-status.on-track { color: #40916c; }
        .objectif-status.warning { color: #d97706; }
        .objectif-status.danger { color: #dc2626; }

        .decret-stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }

        .decret-stat {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .decret-stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .decret-stat-icon.green { background: rgba(45, 106, 79, 0.4); color: #52b788; }
        .decret-stat-icon.blue { background: rgba(30, 58, 95, 0.2); color: #60a5fa; }
        .decret-stat-icon.orange { background: rgba(180, 83, 9, 0.2); color: #d97706; }
        .decret-stat-icon.gold { background: rgba(201, 162, 39, 0.2); color: #c9a227; }

        .decret-stat-info {
            flex: 1;
        }

        .decret-stat-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .decret-stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .operat-export-btn {
            background: linear-gradient(135deg, #2d6a4f, #40916c);
            border: none;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            font-family: inherit;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .operat-export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(45, 106, 79, 0.4);
        }

        .batiment-decret-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .batiment-decret-badge.assujetti {
            background: rgba(45, 106, 79, 0.15);
            color: #40916c;
            border: 1px solid rgba(45, 106, 79, 0.3);
        }

        .batiment-decret-badge.non-assujetti {
            background: rgba(113, 128, 150, 0.15);
            color: var(--text-muted);
            border: 1px solid var(--border);
        }

        .conformite-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .conformite-indicator.conforme {
            background: rgba(45, 106, 79, 0.15);
            color: #40916c;
        }

        .conformite-indicator.en-cours {
            background: rgba(180, 83, 9, 0.15);
            color: #d97706;
        }

        .conformite-indicator.non-conforme {
            background: rgba(153, 27, 27, 0.15);
            color: #dc2626;
        }

        .anct-integration-card {
            background: linear-gradient(135deg, rgba(30, 58, 95, 0.15), rgba(201, 162, 39, 0.1));
            border: 1px solid rgba(201, 162, 39, 0.3);
            border-radius: 12px;
            padding: 1.25rem;
            margin-top: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .anct-logo {
            width: 60px;
            height: 60px;
            background: var(--bg-card);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--secondary);
            border: 1px solid var(--border);
        }

        .anct-info {
            flex: 1;
        }

        .anct-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .anct-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .anct-btn {
            background: var(--gradient-gold);
            border: none;
            color: #0d1b2a;
            padding: 0.6rem 1.25rem;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .anct-btn:hover {
            transform: scale(1.02);
        }


        /* ======================== */
        /* BAILLEURS & FINANCEMENTS */
        /* ======================== */
        .bailleurs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .patrimoine-projets-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 1rem; }
        .patrimoine-projet-card { background: var(--gradient-card); border: 1px solid var(--border); border-radius: 14px; padding: 1rem; cursor: pointer; transition: all 0.25s ease; }
        .patrimoine-projet-card:hover { border-color: var(--secondary); box-shadow: 0 6px 20px rgba(0,0,0,0.2); }

        .bailleur-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .bailleur-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border-color: var(--secondary);
        }

        .bailleur-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
        }

        .bailleur-card.anct::before { background: linear-gradient(90deg, #000091, #0063CB); }
        .bailleur-card.banque-territoires::before { background: linear-gradient(90deg, #E1000F, #FF6B6B); }
        .bailleur-card.ademe::before { background: linear-gradient(90deg, #00A86B, #52b788); }
        .bailleur-card.afd::before { background: linear-gradient(90deg, #FF6B00, #FFB347); }
        .bailleur-card.bei::before { background: linear-gradient(90deg, #003399, #0066CC); }
        .bailleur-card.europe::before { background: linear-gradient(90deg, #003399, #FFCC00); }
        .bailleur-card.region::before { background: linear-gradient(90deg, #6B21A8, #A855F7); }

        .bailleur-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .bailleur-logo {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: white;
            flex-shrink: 0;
        }

        .bailleur-logo.anct { background: linear-gradient(135deg, #000091, #0063CB); }
        .bailleur-logo.banque-territoires { background: linear-gradient(135deg, #E1000F, #FF6B6B); }
        .bailleur-logo.ademe { background: linear-gradient(135deg, #00A86B, #52b788); }
        .bailleur-logo.afd { background: linear-gradient(135deg, #FF6B00, #FFB347); }
        .bailleur-logo.bei { background: linear-gradient(135deg, #003399, #0066CC); }
        .bailleur-logo.europe { background: linear-gradient(135deg, #003399, #FFCC00); }
        .bailleur-logo.region { background: linear-gradient(135deg, #6B21A8, #A855F7); }

        .bailleur-info h4 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0 0 0.25rem 0;
        }

        .bailleur-info p {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin: 0;
        }

        .bailleur-aides {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .aide-tag {
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            padding: 0.3rem 0.6rem;
            border-radius: 6px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .bailleur-stats {
            display: flex;
            justify-content: space-between;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border);
        }

        .bailleur-stat {
            text-align: center;
        }

        .bailleur-stat-value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--secondary);
        }

        .bailleur-stat-label {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .bailleur-action-btn {
            width: 100%;
            margin-top: 1rem;
            padding: 0.6rem;
            border: 1px solid var(--border);
            background: var(--bg-elevated);
            color: var(--text-primary);
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .bailleur-action-btn:hover {
            background: var(--gradient-gold);
            color: #0d1b2a;
            border-color: var(--secondary);
        }

        .financements-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .financements-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .financements-title h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--secondary);
            margin: 0;
        }

        .financements-search {
            display: flex;
            gap: 0.5rem;
        }

        .financements-search input {
            padding: 0.6rem 1rem;
            border: 1px solid var(--border);
            background: var(--bg-elevated);
            color: var(--text-primary);
            border-radius: 8px;
            font-family: inherit;
            width: 250px;
        }

        .aides-territoires-banner {
            background: linear-gradient(135deg, rgba(0, 99, 203, 0.15), rgba(0, 0, 145, 0.1));
            border: 1px solid rgba(0, 99, 203, 0.3);
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .aides-territoires-logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #000091, #0063CB);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .aides-territoires-info {
            flex: 1;
        }

        .aides-territoires-info h4 {
            color: var(--text-primary);
            margin: 0 0 0.25rem 0;
            font-size: 1rem;
        }

        .aides-territoires-info p {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin: 0;
        }

        .eligibilite-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .eligibilite-badge.eligible {
            background: rgba(45, 106, 79, 0.2);
            color: #40916c;
        }

        .eligibilite-badge.en-cours {
            background: rgba(180, 83, 9, 0.2);
            color: #d97706;
        }

        .eligibilite-badge.a-etudier {
            background: rgba(30, 58, 95, 0.2);
            color: #60a5fa;
        }


/* ========================================
   MODE FINANCEUR - Toggle et vues
   ======================================== */
.view-mode-toggle{
    display:flex;
    justify-content:center;
    margin: 1rem 0 1.5rem;
}
.view-mode-toggle-inner{
    display:flex;
    gap: 0.5rem;
    background: var(--bg-elevated);
    padding: 0.35rem;
    border-radius: 16px;
    border: 1px solid var(--border);
}
.view-mode-btn{
    padding: 0.75rem 1.15rem;
    border: none;
    background: transparent;
    color: var(--text-secondary);
    font-family: inherit;
    font-size: 0.9rem;
    font-weight: 600;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.25s ease;
    display:flex;
    align-items:center;
    gap: 0.55rem;
}
.view-mode-btn:hover{
    color: var(--text-primary);
    background: rgba(201, 162, 39, 0.12);
}
.view-mode-btn.active{
    background: var(--gradient-gold);
    color: #0d1b2a;
    box-shadow: 0 8px 22px var(--glow-accent);
}
.detail-view{ display:none; }
.detail-view.active{ display:block; }

/* Financeur hero et cards */
.financeur-hero{
    background: var(--gradient-card);
    border: 1px solid var(--border);
    border-radius: 24px;
    padding: 2rem;
    margin-bottom: 1.5rem;
    position: relative;
    overflow: hidden;
}
.financeur-hero::before{
    content:'';
    position:absolute;
    top:0; left:0; right:0;
    height:4px;
    background: var(--gradient-gold);
}
.financeur-badge{
    display:inline-flex;
    align-items:center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: rgba(201, 162, 39, 0.15);
    border: 1px solid rgba(201, 162, 39, 0.3);
    border-radius: 999px;
    color: var(--secondary);
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 1rem;
}
.financeur-title{
    font-size: 1.75rem;
    font-weight: 700;
    line-height: 1.25;
    margin-bottom: 0.5rem;
}
.financeur-meta{
    color: var(--text-secondary);
    line-height: 1.6;
}
.financeur-grid{
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
}
.financeur-kpi{
    background: var(--gradient-card);
    border: 1px solid var(--border);
    border-radius: 18px;
    padding: 1.25rem;
}
.financeur-kpi .k{
    color: var(--text-muted);
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 0.35rem;
}
.financeur-kpi .v{
    font-family: 'JetBrains Mono', monospace;
    font-weight: 700;
    color: var(--secondary);
    font-size: 1.15rem;
}
.financeur-card{
    background: var(--gradient-card);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 1.5rem;
    margin-bottom: 1.25rem;
}
.financeur-card h3{
    display:flex;
    align-items:center;
    gap: 0.75rem;
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.9rem;
    padding-bottom: 0.9rem;
    border-bottom: 1px solid var(--border);
}
.financeur-card h3 i{ color: var(--secondary); }
.financeur-card p, .financeur-card li{
    color: var(--text-secondary);
    line-height: 1.7;
}
.financeur-card ul{
    margin-left: 1.25rem;
}
.financeur-note{
    text-align:center;
    color: var(--text-muted);
    line-height: 1.6;
    margin-top: 1rem;
}
.financeur-note strong{ color: var(--text-primary); }

/* En mode Financeur, masquer les éléments interactifs */
body.financeur-mode .ai-assistant{ display:none !important; }
body.financeur-mode .validation-widget,
body.financeur-mode .suivi-widget,
body.financeur-mode .archive-widget{ display:none !important; }


        
        /* ======================== */
        /* MODULE FINANCE CLIMAT    */
        /* ======================== */
        .climat-widget {
            background: linear-gradient(135deg, rgba(16, 70, 82, 0.3), rgba(13, 27, 42, 0.9));
            border: 1px solid rgba(45, 212, 191, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .climat-widget::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #2dd4bf, #22c55e, #84cc16);
        }

        .climat-widget-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.25rem;
        }

        .climat-widget-header i {
            font-size: 1.5rem;
            color: #2dd4bf;
        }

        .climat-widget-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2dd4bf;
            margin: 0;
        }

        .climat-badge-mrv {
            margin-left: auto;
            background: rgba(45, 212, 191, 0.15);
            color: #2dd4bf;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: 1px solid rgba(45, 212, 191, 0.3);
        }

        .climat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .climat-field {
            background: rgba(45, 212, 191, 0.08);
            border-radius: 10px;
            padding: 0.85rem 1rem;
        }

        .climat-field-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.4rem;
        }

        .climat-field-value {
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .climat-field-value.highlight {
            color: #2dd4bf;
        }

        .climat-indicators {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(45, 212, 191, 0.15);
        }

        .climat-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .climat-indicator-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .climat-indicator-icon.co2 {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .climat-indicator-icon.energy {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .climat-indicator-icon.water {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .climat-indicator-value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .climat-indicator-unit {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .climat-status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.35rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .climat-status-badge.prospection {
            background: rgba(156, 163, 175, 0.2);
            color: #9ca3af;
        }

        .climat-status-badge.pre-accord {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .climat-status-badge.accorde {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .climat-status-badge.execution {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .climat-status-badge.cloture {
            background: rgba(139, 92, 246, 0.2);
            color: #8b5cf6;
        }

        .climat-timeline {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(13, 27, 42, 0.5);
            border-radius: 10px;
        }

        .climat-timeline-title {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .climat-timeline-events {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .climat-timeline-event {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.85rem;
        }

        .climat-timeline-event .date {
            color: var(--text-muted);
            min-width: 80px;
        }

        .climat-timeline-event .event {
            color: var(--text-primary);
        }

        .climat-timeline-event .event.done {
            color: #22c55e;
        }

        /* Financeur View - Section Climat */
        .financeur-climat-section {
            background: linear-gradient(135deg, rgba(16, 70, 82, 0.4), rgba(13, 27, 42, 0.95));
            border: 1px solid rgba(45, 212, 191, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .financeur-climat-section h3 {
            color: #2dd4bf;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .financeur-climat-section h3 i {
            color: #2dd4bf;
        }

        .climat-sources-list {
            list-style: none;
            padding: 0;
            margin: 0.75rem 0 0 0;
        }

        .climat-sources-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(45, 212, 191, 0.1);
        }

        .climat-sources-list li:last-child {
            border-bottom: none;
        }

        .climat-sources-list .source-name {
            color: var(--text-primary);
        }

        .climat-sources-list .source-amount {
            font-weight: 600;
            color: #2dd4bf;
        }

        .climat-note {
            margin-top: 1rem;
            padding: 0.75rem;
            background: rgba(45, 212, 191, 0.08);
            border-left: 3px solid #2dd4bf;
            border-radius: 0 8px 8px 0;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .climat-methode-impact {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-top: 1rem;
            padding: 0.6rem 1rem;
            background: rgba(45, 212, 191, 0.08);
            border-radius: 10px;
            font-size: 0.9rem;
        }
        .climat-methode-impact .label { color: var(--text-muted); font-weight: 500; }
        .climat-methode-impact .value { color: #2dd4bf; font-weight: 600; }

        .climat-maj-source {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-top: 1rem;
            padding: 0.6rem 1rem;
            background: rgba(45, 212, 191, 0.06);
            border-radius: 10px;
            font-size: 0.85rem;
        }
        .climat-maj-source .item { display: flex; align-items: center; gap: 0.5rem; }
        .climat-maj-source .item .tag { color: var(--text-muted); }
        .climat-maj-source .item .val { color: var(--text-primary); font-weight: 500; }

        .climat-audit-checklist {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 0.6rem;
            margin-top: 1rem;
        }
        .climat-audit-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: rgba(45, 212, 191, 0.06);
            border-radius: 8px;
            font-size: 0.8rem;
        }
        .climat-audit-item .name { color: var(--text-secondary); }
        .climat-audit-item .stat { padding: 0.15rem 0.5rem; border-radius: 6px; font-size: 0.7rem; font-weight: 600; }
        .climat-audit-item .stat.ok { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
        .climat-audit-item .stat.pending { background: rgba(251, 191, 36, 0.2); color: #fbbf24; }

        /* Checklist audit-ready — options cliquables (aspect comme avant) */
        .climat-audit-item-clickable { cursor: pointer; transition: background 0.2s; }
        .climat-audit-item-clickable:hover { background: rgba(45, 212, 191, 0.12) !important; }
        .climat-audit-item .stat { padding: 0.2rem 0.6rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; white-space: nowrap; }
        .climat-audit-item .stat.ok { background: rgba(34, 197, 94, 0.25); color: #22c55e; }
        .climat-audit-item .stat.pending { background: rgba(251, 191, 36, 0.25); color: #fbbf24; }
        .climat-audit-readonly .climat-audit-item { opacity: 0.8; cursor: default; pointer-events: none; }
        .climat-audit-hint { font-size: 0.8rem; color: var(--text-muted); margin: 0.75rem 0 0 0; padding: 0.5rem 0; }
        .climat-audit-readonly-msg { color: var(--text-muted); }

        .climat-export-justificatifs {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
            padding: 0.65rem 1.25rem;
            background: linear-gradient(135deg, #0d9488, #2dd4bf);
            border: none;
            border-radius: 10px;
            color: #0d1b2a;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .climat-export-justificatifs:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(45, 212, 191, 0.4);
        }

        /* ======================== */
        /* ÉCHÉANCIER FINANCEUR     */
        /* ======================== */
        .financeur-deadlines {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.15), rgba(13, 27, 42, 0.95));
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .financeur-deadlines h3 {
            color: #fbbf24;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .financeur-deadlines h3 i {
            color: #fbbf24;
        }

        .deadline-timeline {
            position: relative;
            padding-left: 2rem;
        }

        .deadline-timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #fbbf24, rgba(251, 191, 36, 0.2));
        }

        .deadline-item {
            position: relative;
            padding: 0.75rem 0;
            padding-left: 1rem;
        }

        .deadline-item::before {
            content: '';
            position: absolute;
            left: -1.5rem;
            top: 1rem;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 2px solid #fbbf24;
        }

        .deadline-item.completed::before {
            background: #22c55e;
            border-color: #22c55e;
        }

        .deadline-item.current::before {
            background: #fbbf24;
            border-color: #fbbf24;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }

        .deadline-item.upcoming::before {
            background: var(--bg-card);
            border-color: var(--text-muted);
        }

        .deadline-date {
            font-size: 0.75rem;
            font-weight: 600;
            color: #fbbf24;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.25rem;
        }

        .deadline-item.completed .deadline-date {
            color: #22c55e;
        }

        .deadline-item.upcoming .deadline-date {
            color: var(--text-muted);
        }

        .deadline-label {
            font-size: 0.95rem;
            color: var(--text-primary);
        }

        .deadline-item.completed .deadline-label {
            color: var(--text-secondary);
        }

        .deadline-status {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.7rem;
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            margin-left: 0.5rem;
        }

        .deadline-status.done {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .deadline-status.in-progress {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .deadline-status.pending {
            background: rgba(156, 163, 175, 0.2);
            color: #9ca3af;
        }

        .deadline-alert {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-top: 1rem;
            padding: 0.75rem 1rem;
            background: rgba(251, 191, 36, 0.1);
            border-radius: 8px;
            border-left: 3px solid #fbbf24;
        }

        .deadline-alert i {
            color: #fbbf24;
            font-size: 1.25rem;
        }

        .deadline-alert-text {
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .deadline-alert-date {
            font-weight: 600;
            color: #fbbf24;
        }

        /* ======================== */
        /* REGISTRE DE CONFORMITÉ – RÉFÉRENCES DÉCLARÉES */
        /* ======================== */
        .financeur-registre-conformite {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(13, 27, 42, 0.95));
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .financeur-registre-conformite h3 {
            color: #a78bfa;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .financeur-registre-conformite h3 i {
            color: #a78bfa;
        }

        .registre-references-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        .registre-reference-card {
            background: rgba(139, 92, 246, 0.08);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 10px;
            padding: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            transition: background 0.2s, border-color 0.2s;
        }

        .registre-reference-card:hover {
            background: rgba(139, 92, 246, 0.12);
            border-color: rgba(139, 92, 246, 0.3);
        }

        .registre-reference-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .registre-reference-icon.document {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .registre-reference-icon.validation {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .registre-reference-icon.governance {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .registre-reference-icon.audit {
            background: rgba(236, 72, 153, 0.2);
            color: #ec4899;
        }

        .registre-reference-content {
            flex: 1;
        }

        .registre-reference-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .registre-reference-details {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .registre-reference-status {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.7rem;
            padding: 0.2rem 0.6rem;
            border-radius: 10px;
            font-weight: 500;
        }

        .registre-reference-status.confirmed {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .registre-reference-status.declared {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .registre-reference-status.pending {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .preuves-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        .preuve-card {
            background: rgba(139, 92, 246, 0.08);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 10px;
            padding: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .preuve-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .preuve-icon.document {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .preuve-icon.validation {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .preuve-icon.governance {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .preuve-icon.audit {
            background: rgba(236, 72, 153, 0.2);
            color: #ec4899;
        }

        .preuve-content {
            flex: 1;
        }

        .preuve-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .preuve-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .preuve-status {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.7rem;
            padding: 0.2rem 0.6rem;
            border-radius: 10px;
        }

        .preuve-status.verified {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .preuve-status.pending {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .preuve-status.missing {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .conformite-score {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 1.25rem;
            padding: 1rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 10px;
        }

        .conformite-gauge {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: conic-gradient(#a78bfa 0% 83%, rgba(139, 92, 246, 0.2) 83% 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .conformite-gauge::before {
            content: '';
            position: absolute;
            width: 46px;
            height: 46px;
            background: var(--bg-card);
            border-radius: 50%;
        }

        .conformite-gauge-value {
            position: relative;
            z-index: 1;
            font-size: 1rem;
            font-weight: 700;
            color: #a78bfa;
        }

        .conformite-details {
            flex: 1;
        }

        .conformite-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .conformite-desc {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Standardisation badges */
        .standardisation-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .std-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.4rem 0.75rem;
            background: rgba(139, 92, 246, 0.15);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 20px;
            font-size: 0.75rem;
            color: var(--text-primary);
        }

        .std-badge i {
            color: #a78bfa;
            font-size: 0.7rem;
        }


        /* ======================== */
        /* ESPACE FINANCEUR DÉDIÉ   */
        /* ======================== */
        .financeur-dashboard {
            padding: 2rem;
        }

        .financeur-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .financeur-identity {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .financeur-logo {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #c9a227, #d4b545);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #0d1b2a;
            box-shadow: 0 8px 25px rgba(201, 162, 39, 0.3);
        }

        .financeur-info h1 {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .financeur-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .financeur-quick-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .fq-btn {
            padding: 0.6rem 1rem;
            border: none;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: inherit;
            transition: all 0.2s ease;
        }

        .fq-btn.primary {
            background: linear-gradient(135deg, #c9a227, #d4b545);
            color: #0d1b2a;
        }

        .fq-btn.secondary {
            background: rgba(201, 162, 39, 0.15);
            color: var(--secondary);
            border: 1px solid rgba(201, 162, 39, 0.3);
        }

        .fq-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(201, 162, 39, 0.3);
        }

        /* KPI Cards Financeur */
        .financeur-kpis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.25rem;
            margin-bottom: 2rem;
        }

        .fkpi-card {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
            position: relative;
            overflow: hidden;
        }

        .fkpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
        }

        .fkpi-card.gold::before { background: linear-gradient(90deg, #c9a227, #d4b545); }
        .fkpi-card.green::before { background: linear-gradient(90deg, #22c55e, #4ade80); }
        .fkpi-card.blue::before { background: linear-gradient(90deg, #3b82f6, #60a5fa); }
        .fkpi-card.purple::before { background: linear-gradient(90deg, #8b5cf6, #a78bfa); }
        .fkpi-card.orange::before { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
        .fkpi-card.teal::before { background: linear-gradient(90deg, #14b8a6, #2dd4bf); }

        .fkpi-icon {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.75rem;
            font-size: 1.25rem;
        }

        .fkpi-card.gold .fkpi-icon { background: rgba(201, 162, 39, 0.2); color: #c9a227; }
        .fkpi-card.green .fkpi-icon { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
        .fkpi-card.blue .fkpi-icon { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
        .fkpi-card.purple .fkpi-icon { background: rgba(139, 92, 246, 0.2); color: #8b5cf6; }
        .fkpi-card.orange .fkpi-icon { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
        .fkpi-card.teal .fkpi-icon { background: rgba(45, 212, 191, 0.2); color: #2dd4bf; }

        .fkpi-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .fkpi-label {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Sections du dashboard */
        .fdash-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 1024px) {
            .fdash-grid { grid-template-columns: 1fr; }
        }

        .fdash-section {
            background: var(--gradient-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .fdash-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .fdash-section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .fdash-section-title i {
            color: var(--secondary);
        }

        /* Projets financés */
        .projet-finance-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(201, 162, 39, 0.05);
            border-radius: 10px;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .projet-finance-item:hover {
            background: rgba(201, 162, 39, 0.12);
            transform: translateX(4px);
        }

        .projet-finance-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .projet-finance-status.en-cours { background: #22c55e; box-shadow: 0 0 8px rgba(34, 197, 94, 0.5); }
        .projet-finance-status.en-retard { background: #ef4444; box-shadow: 0 0 8px rgba(239, 68, 68, 0.5); }
        .projet-finance-status.termine { background: #8b5cf6; }
        .projet-finance-status.a-valider { background: #fbbf24; box-shadow: 0 0 8px rgba(251, 191, 36, 0.5); }

        .projet-finance-info {
            flex: 1;
        }

        .projet-finance-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
            margin-bottom: 0.2rem;
        }

        .projet-finance-collectivite {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .projet-finance-montant {
            font-weight: 600;
            color: var(--secondary);
            font-size: 0.9rem;
        }

        /* Alertes et notifications */
        .falert-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.85rem;
            border-radius: 10px;
            margin-bottom: 0.6rem;
        }

        .falert-item.urgent {
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid #ef4444;
        }

        .falert-item.warning {
            background: rgba(251, 191, 36, 0.1);
            border-left: 3px solid #fbbf24;
        }

        .falert-item.info {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
        }

        .falert-item.success {
            background: rgba(34, 197, 94, 0.1);
            border-left: 3px solid #22c55e;
        }

        .falert-icon {
            font-size: 1rem;
            margin-top: 0.1rem;
        }

        .falert-item.urgent .falert-icon { color: #ef4444; }
        .falert-item.warning .falert-icon { color: #fbbf24; }
        .falert-item.info .falert-icon { color: #3b82f6; }
        .falert-item.success .falert-icon { color: #22c55e; }

        .falert-content {
            flex: 1;
        }

        .falert-title {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.15rem;
        }

        .falert-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Impact cards */
        .impact-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .impact-grid { grid-template-columns: 1fr; }
        }

        .impact-card {
            background: rgba(45, 212, 191, 0.08);
            border: 1px solid rgba(45, 212, 191, 0.2);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
        }

        .impact-card-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 0.75rem;
            font-size: 1.25rem;
        }

        .impact-card-icon.co2 { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
        .impact-card-icon.energy { background: rgba(251, 191, 36, 0.2); color: #fbbf24; }
        .impact-card-icon.water { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }

        .impact-card-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .impact-card-unit {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .impact-card-label {
            font-size: 0.8rem;
            color: #2dd4bf;
            font-weight: 500;
        }

        /* Collaborateurs */
        .collab-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .collab-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.6rem 0.75rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
        }

        .collab-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .collab-info {
            flex: 1;
        }

        .collab-name {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .collab-role {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .collab-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #22c55e;
        }

        .collab-status.offline { background: #9ca3af; }

        /* Documents à valider - widget compact */
        .docs-pending-widget {
            background: rgba(251, 191, 36, 0.08);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: 12px;
            padding: 1rem;
        }

        .docs-pending-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .docs-pending-count {
            background: #fbbf24;
            color: #0d1b2a;
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .doc-pending-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(251, 191, 36, 0.1);
        }

        .doc-pending-item:last-child { border-bottom: none; }

        .doc-pending-name {
            font-size: 0.85rem;
            color: var(--text-primary);
        }

        .doc-pending-btn {
            padding: 0.3rem 0.6rem;
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: none;
            border-radius: 6px;
            font-size: 0.7rem;
            cursor: pointer;
            font-family: inherit;
        }

        .doc-pending-btn:hover {
            background: rgba(251, 191, 36, 0.4);
        }

    
/* ======================================================
   COLCONNECT – ESPACE FINANCEUR (v1)
   - 6 onglets, filtres, cartes enrichies, actions
   - stockage localStorage (favoris, notes, statuts)
   ====================================================== */
#financeurWorkspaceOverlay{position:fixed;inset:0;z-index:10000;display:none;background:rgba(4,10,20,.72);backdrop-filter:blur(10px)}
#financeurWorkspaceOverlay.active{display:block}
#financeurWorkspace{position:absolute;inset:20px;border-radius:18px;background:linear-gradient(145deg,rgba(12,22,36,.96),rgba(7,14,26,.98));border:1px solid rgba(212,175,55,.18);box-shadow:0 18px 60px rgba(0,0,0,.55);display:grid;grid-template-columns:320px 1fr;overflow:hidden}
@media (max-width:980px){#financeurWorkspace{grid-template-columns:1fr}#financeurWorkspaceSidebar{display:none}}
#financeurWorkspaceSidebar{padding:18px 16px;border-right:1px solid rgba(212,175,55,.14);background:linear-gradient(180deg,rgba(18,33,52,.55),rgba(10,18,32,.25))}
.fw-title{font-weight:900;letter-spacing:.2px;margin:0 0 8px;font-size:1.05rem}
.fw-sub{margin:0 0 14px;color:var(--text-muted,rgba(255,255,255,.65));line-height:1.45;font-size:.92rem}
.fw-kpi-grid{display:grid;grid-template-columns:1fr;gap:10px}
.fw-kpi{background:rgba(255,255,255,.03);border:1px solid rgba(212,175,55,.14);border-radius:14px;padding:12px 12px}
.fw-kpi .k{color:var(--text-muted,rgba(255,255,255,.65));font-size:.78rem;text-transform:uppercase;letter-spacing:1px;margin:0 0 6px}
.fw-kpi .v{margin:0;font-weight:900;color:rgba(212,175,55,.95)}
#financeurWorkspaceMain{display:flex;flex-direction:column;min-width:0}
.fw-topbar{padding:14px 16px;display:flex;align-items:center;justify-content:space-between;gap:12px;border-bottom:1px solid rgba(212,175,55,.14)}
.fw-topbar .left{display:flex;flex-direction:column;gap:2px}
.fw-topbar h2{margin:0;font-size:1.05rem;letter-spacing:.2px}
.fw-topbar p{margin:0;color:var(--text-muted,rgba(255,255,255,.65));font-size:.92rem}
.fw-close{border:1px solid rgba(212,175,55,.22);background:rgba(255,255,255,.03);color:#fff;border-radius:12px;padding:.55rem .8rem;cursor:pointer;font-weight:800}
.fw-close:hover{border-color:rgba(212,175,55,.5)}
.fw-tabs{padding:10px 16px 0;display:flex;flex-wrap:wrap;gap:8px}
.fw-tab{border:1px solid rgba(212,175,55,.22);background:rgba(255,255,255,.03);color:#fff;border-radius:999px;padding:.45rem .75rem;cursor:pointer;font-weight:800;display:flex;align-items:center;gap:.5rem}
.fw-tab.active{background:linear-gradient(135deg,rgba(212,175,55,.95),rgba(201,162,39,.95));color:#081225;border-color:rgba(212,175,55,.55)}
.fw-pill{display:inline-flex;align-items:center;justify-content:center;min-width:28px;padding:.1rem .5rem;border-radius:999px;font-size:.82rem;font-weight:900;background:rgba(8,18,37,.55);border:1px solid rgba(0,0,0,.25)}
.fw-filters{padding:12px 16px;display:grid;grid-template-columns:1.1fr 1fr 1fr 1fr 1.2fr;gap:10px;border-bottom:1px solid rgba(212,175,55,.12)}
@media (max-width:1100px){.fw-filters{grid-template-columns:1fr 1fr}}
.fw-field{display:flex;flex-direction:column;gap:6px;min-width:0}
.fw-field label{font-size:.78rem;letter-spacing:1px;text-transform:uppercase;color:var(--text-muted,rgba(255,255,255,.65))}
.fw-field input,.fw-field select{background:rgba(255,255,255,.03);border:1px solid rgba(212,175,55,.18);color:#fff;border-radius:12px;padding:.55rem .6rem;outline:none}
.fw-field input::placeholder{color:rgba(255,255,255,.45)}
.fw-field input:focus,.fw-field select:focus{border-color:rgba(212,175,55,.55)}
.fw-content{padding:14px 16px 18px;overflow:auto}
.fw-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
@media (max-width:1200px){.fw-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:760px){.fw-grid{grid-template-columns:1fr}}
.fw-card{background:rgba(255,255,255,.03);border:1px solid rgba(212,175,55,.16);border-radius:16px;padding:12px 12px;display:flex;flex-direction:column;gap:10px;min-width:0}
.fw-card:hover{border-color:rgba(212,175,55,.42)}
.fw-card-top{display:flex;justify-content:space-between;gap:10px}
.fw-card-title{font-weight:900;margin:0;font-size:.98rem;line-height:1.25}
.fw-card-meta{margin:3px 0 0;color:var(--text-muted,rgba(255,255,255,.65));font-size:.9rem;line-height:1.35}
.fw-status{display:inline-flex;align-items:center;gap:.4rem;border-radius:999px;padding:.25rem .6rem;font-size:.82rem;font-weight:900;border:1px solid rgba(255,255,255,.12);white-space:nowrap;height:fit-content}
.fw-status.financed{background:rgba(82,183,136,.16);border-color:rgba(82,183,136,.34);color:#9ef0c8}
.fw-status.study{background:rgba(78,168,222,.14);border-color:rgba(78,168,222,.34);color:#a9ddff}
.fw-status.opportunity{background:rgba(241,196,83,.12);border-color:rgba(241,196,83,.32);color:#f1c453}
.fw-status.refused{background:rgba(245,83,83,.12);border-color:rgba(245,83,83,.32);color:#ff9e9e}
.fw-status.favorite{background:rgba(212,175,55,.14);border-color:rgba(212,175,55,.38);color:rgba(212,175,55,.98)}
.fw-tags{display:flex;flex-wrap:wrap;gap:6px}
.fw-tag{font-size:.78rem;font-weight:800;padding:.22rem .55rem;border-radius:999px;border:1px solid rgba(212,175,55,.18);background:rgba(255,255,255,.02);color:rgba(255,255,255,.85)}
.fw-metrics{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}
.fw-metric{background:rgba(8,18,37,.35);border:1px solid rgba(212,175,55,.12);border-radius:14px;padding:8px 10px}
.fw-metric .k{margin:0;color:var(--text-muted,rgba(255,255,255,.65));font-size:.72rem;text-transform:uppercase;letter-spacing:1px}
.fw-metric .v{margin:.1rem 0 0;font-weight:900;color:rgba(212,175,55,.95)}
.fw-actions{display:flex;flex-wrap:wrap;gap:8px}
.fw-btn{border:1px solid rgba(212,175,55,.22);background:rgba(255,255,255,.03);color:#fff;border-radius:12px;padding:.48rem .65rem;cursor:pointer;font-weight:800;font-size:.9rem;display:inline-flex;align-items:center;gap:.45rem}
.fw-btn.primary{background:linear-gradient(135deg,rgba(212,175,55,.95),rgba(201,162,39,.95));color:#081225}
.fw-btn.danger{border-color:rgba(245,83,83,.35);color:#ffd0d0}
.fw-btn:hover{border-color:rgba(212,175,55,.55)}
.fw-btn.danger:hover{border-color:rgba(245,83,83,.65)}
.fw-note{margin:0;color:var(--text-muted,rgba(255,255,255,.65));font-size:.9rem;line-height:1.4;background:rgba(0,0,0,.12);border:1px dashed rgba(212,175,55,.18);border-radius:12px;padding:8px 10px}
#financeurNotesModal{position:fixed;inset:0;z-index:11000;display:none;background:rgba(0,0,0,.55);backdrop-filter:blur(6px)}
#financeurNotesModal.active{display:block}
#financeurNotesModal .panel{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(720px,calc(100% - 24px));background:linear-gradient(145deg,rgba(12,22,36,.98),rgba(7,14,26,.98));border:1px solid rgba(212,175,55,.2);border-radius:18px;padding:14px 14px}
#financeurNotesModal textarea{width:100%;min-height:180px;resize:vertical;border-radius:14px;padding:10px 12px;background:rgba(255,255,255,.03);border:1px solid rgba(212,175,55,.18);color:#fff;outline:none}
#financeurNotesModal textarea:focus{border-color:rgba(212,175,55,.55)}
#financeurNotesModal .row{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}

/* ================================== */
/* PANEL NOTIFICATIONS COLCONNECT    */
/* ================================== */
.cc-notifications {
  background: var(--gradient-card);
  border-radius: 16px;
  padding: 20px 24px;
  border: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.cc-notif-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  border-bottom: 1px solid var(--border);
  padding-bottom: 12px;
}

.cc-notif-header h2 {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.cc-notif-header p {
  font-size: 0.85rem;
  color: var(--text-muted);
  margin: 0;
}

.cc-notif-kpis {
  display: flex;
  gap: 8px;
}

.cc-badge {
  font-size: 0.8rem;
  padding: 6px 14px;
  border-radius: 999px;
  background: linear-gradient(135deg, #c9a227, #d4b545);
  color: #0d1b2a;
  font-weight: 600;
}

.cc-badge-soft {
  background: rgba(255,255,255,0.1);
  color: var(--text-secondary);
}

.cc-notif-filters {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.cc-notif-filters .row {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

#notif-search {
  flex: 1;
  min-width: 200px;
  font-size: 0.85rem;
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--bg-elevated);
  color: var(--text-primary);
  font-family: inherit;
}

#notif-search:focus {
  outline: none;
  border-color: var(--secondary);
  box-shadow: 0 0 0 3px rgba(201, 162, 39, 0.15);
}

#notif-search::placeholder {
  color: var(--text-muted);
}

.cc-notif-filters select {
  flex: 1;
  min-width: 120px;
  font-size: 0.85rem;
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--bg-elevated);
  color: var(--text-primary);
  font-family: inherit;
  cursor: pointer;
}

.cc-notif-filters select:focus {
  outline: none;
  border-color: var(--secondary);
}

.cc-notif-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-height: 55vh;
  overflow-y: auto;
  padding-right: 4px;
}

.cc-notif-list::-webkit-scrollbar {
  width: 6px;
}

.cc-notif-list::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.05);
  border-radius: 3px;
}

.cc-notif-list::-webkit-scrollbar-thumb {
  background: rgba(201, 162, 39, 0.3);
  border-radius: 3px;
}

.cc-notif-item {
  display: flex;
  justify-content: space-between;
  gap: 16px;
  padding: 16px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--bg-elevated);
  font-size: 0.85rem;
  transition: all 0.3s ease;
}

.cc-notif-item:hover {
  border-color: rgba(201, 162, 39, 0.3);
  transform: translateX(4px);
}

.cc-notif-item.is-unread {
  border-left: 4px solid var(--secondary);
  background: linear-gradient(90deg, rgba(201, 162, 39, 0.08), var(--bg-elevated));
}

.cc-notif-main {
  flex: 1;
  min-width: 0;
}

.cc-notif-title-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}

.cc-notif-title-row h3 {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.cc-notif-text {
  color: var(--text-secondary);
  margin-bottom: 10px;
  line-height: 1.5;
}

.cc-notif-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  font-size: 0.8rem;
  color: var(--text-muted);
}

.cc-notif-meta span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.cc-notif-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: flex-end;
  justify-content: center;
}

.cc-notif-btn {
  font-size: 0.8rem;
  padding: 8px 16px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.05);
  color: var(--text-secondary);
  cursor: pointer;
  text-decoration: none;
  font-family: inherit;
  white-space: nowrap;
  transition: all 0.2s ease;
}

.cc-notif-btn:hover {
  background: rgba(255,255,255,0.1);
  border-color: rgba(201, 162, 39, 0.3);
}

.cc-notif-btn-primary {
  background: linear-gradient(135deg, #c9a227, #d4b545);
  color: #0d1b2a;
  border: none;
  font-weight: 600;
}

.cc-notif-btn-primary:hover {
  background: linear-gradient(135deg, #d4b545, #e0c35a);
}

.cc-notif-pill {
  font-size: 0.7rem;
  padding: 4px 10px;
  border-radius: 999px;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  font-weight: 600;
}

.cc-notif-pill-projet {
  background: rgba(39, 174, 96, 0.2);
  color: #2ecc71;
}

.cc-notif-pill-aide {
  background: rgba(0, 0, 145, 0.2);
  color: #6b7ff0;
}

.cc-notif-pill-conf {
  background: rgba(241, 196, 15, 0.2);
  color: #f1c40f;
}

.cc-notif-pill-admin {
  background: rgba(155, 89, 182, 0.2);
  color: #9b59b6;
}

@media (max-width: 768px) {
  .cc-notif-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .cc-notif-filters .row {
    flex-direction: column;
  }

  .cc-notif-item {
    flex-direction: column;
  }

  .cc-notif-actions {
    flex-direction: row;
    justify-content: flex-start;
    flex-wrap: wrap;
  }
}

/* ============================================ */
/* RESTRICTION BOUTON ADMINISTRATION PAR RÔLE  */
/* ============================================ */

/* Administration désactivée pour Collectivité / Financeur */
body[data-role="collectivite"] .cc-nav-admin,
body[data-role="financeur"] .cc-nav-admin,
.cc-nav-admin.cc-nav-admin-disabled {
    pointer-events: none;
    opacity: 0.45;
    cursor: not-allowed;
}

/* Administration activée pour Admin / SuperAdmin */
body[data-role="admin"] .cc-nav-admin,
body[data-role="superadmin"] .cc-nav-admin {
    pointer-events: auto;
    opacity: 1;
    cursor: pointer;
}

/* ============================================ */
/* GOUVERNANCE : suppression des éléments d'édition hors Administration */
/* Aucun crayon, bouton modifier ou style éditable visible hors module Admin */
/* ============================================ */
#priv-collectivite .edit-btn,
#priv-collectivite .team-delete,
#priv-collectivite .historique-delete,
#priv-collectivite .add-item-btn {
    display: none !important;
}
#priv-collectivite .editable-module { pointer-events: auto; }
body[data-role="collectivite"] .gov-admin-only,
body[data-role="financeur"] .gov-admin-only,
body[data-role="visiteur"] .gov-admin-only {
    display: none !important;
}
body[data-role="admin"] .gov-admin-only,
body[data-role="superadmin"] .gov-admin-only {
    display: flex;
}
body[data-role="admin"] .gov-admin-only.inline,
body[data-role="superadmin"] .gov-admin-only.inline { display: inline-flex; }

/* Nom de collectivité à droite masqué : redondant avec le sous-titre sous le logo ColConnect */
#userInfo {
    display: none !important;
}

/* Badge de rôle dans le header */
/* Badge rôle masqué dans le header : égalité institutionnelle, pas d'affichage du statut utilisateur */
.header-role-badge {
    display: none !important;
    align-items: center;
    padding: 0.35rem 0.75rem;
    background: linear-gradient(135deg, rgba(201, 162, 39, 0.2), rgba(201, 162, 39, 0.1));
    border: 1px solid rgba(201, 162, 39, 0.4);
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--secondary);
    margin-left: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* ============================================ */
/* SYSTÈME DE MODALES                          */
/* ============================================ */

.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.55);
    backdrop-filter: blur(8px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9000;
}

.modal-overlay.active {
    display: flex;
}

.modal {
    background: var(--gradient-card);
    border-radius: 20px;
    border: 1px solid var(--border);
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow: hidden;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
}

.modal-admin {
    max-width: 800px;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.25rem 1.5rem;
    border-bottom: 1px solid var(--border);
    background: rgba(0, 0, 0, 0.2);
}

.modal-header h3 {
    margin: 0;
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--text-primary);
}

.modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--text-muted);
    cursor: pointer;
    transition: color 0.2s ease;
    line-height: 1;
}

.modal-close:hover {
    color: var(--danger);
}

.modal-body {
    padding: 1.5rem;
    overflow-y: auto;
    max-height: 50vh;
    color: var(--text-secondary);
    line-height: 1.7;
}

.modal-footer {
    display: flex;
    gap: 0.75rem;
    justify-content: flex-end;
    padding: 1rem 1.5rem;
    border-top: 1px solid var(--border);
    background: rgba(0, 0, 0, 0.15);
}

.modal-footer .btn {
    padding: 0.6rem 1.25rem;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s ease;
}

.modal-footer .btn-primary {
    background: linear-gradient(135deg, #c9a227, #d4b545);
    color: #0d1b2a;
    border: none;
}

.modal-footer .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(201, 162, 39, 0.4);
}

.modal-footer .btn-secondary {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-secondary);
    border: 1px solid var(--border);
}

.modal-footer .btn-secondary:hover {
    background: rgba(255, 255, 255, 0.15);
}

/* ===== Hors "Accéder à ma collectivité" (mode public) =====
   Suivi grisé ; section Projets : filtres / vue / pagination actifs, cartes non cliquables. */
html:not([data-cc-private="1"]) .nav-tab[data-section="detail"] {
    opacity: 0.5 !important;
    filter: grayscale(0.6) !important;
    cursor: not-allowed !important;
    pointer-events: none !important;
}
html:not([data-cc-private="1"]) #projets .projet-card {
    cursor: default !important;
    pointer-events: none !important;
}
html:not([data-cc-private="1"]) #projets .projet-card:hover {
    transform: none;
    box-shadow: inherit;
}

/* CC_PATCH_HOME_ICONS_V2 */
/* Objectif : icônes plus petites + couleurs type screenshot (bleu/vert/or/orange)
   - stats : .stat-icon.(blue|green|purple|orange)
   - actions : .action-icon (pastille or)
*/

:root {
  --cc-blue: rgba(30, 58, 95, 0.55);
  --cc-green: rgba(45, 106, 79, 0.55);
  --cc-gold: rgba(201, 162, 39, 0.55);
  --cc-orange: rgba(180, 83, 9, 0.55);

  --cc-blue-ink: #9ec5ff;
  --cc-green-ink: #7ff0c0;
  --cc-gold-ink: #0d1b2a;
  --cc-orange-ink: #ffd3a6;
}

/* Taille "pastille" + icône plus petite */
.stat-icon,
.action-icon {
  width: 48px !important;
  height: 48px !important;
  border-radius: 14px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;

  box-shadow: none !important;
  border: 1px solid rgba(201, 162, 39, 0.22) !important;
  filter: saturate(1.05) contrast(1.05) !important;
}

.stat-icon i,
.action-icon i {
  font-size: 1.15rem !important;
  line-height: 1 !important;
  filter: none !important;
}

/* Si l'icône est en texte direct (sans <i>) */
.stat-icon,
.action-icon {
  font-size: 1.15rem !important;
}

/* Styles stats (4 cartes du haut) */
.stat-icon.blue {
  background: var(--cc-blue) !important;
  color: var(--cc-blue-ink) !important;
}
.stat-icon.green {
  background: var(--cc-green) !important;
  color: var(--cc-green-ink) !important;
}
.stat-icon.purple {
  /* KPI validation : rendu or doux */
  background: var(--cc-gold) !important;
  color: var(--secondary) !important;
}
.stat-icon.orange {
  background: var(--cc-orange) !important;
  color: var(--cc-orange-ink) !important;
}

/* Styles actions (4 cartes du bas) — pastille or + icône sombre */
.action-icon {
  background: rgba(201, 162, 39, 0.9) !important;
  color: var(--cc-gold-ink) !important;
  border: 1px solid rgba(201, 162, 39, 0.35) !important;
}

/* Hover : léger */
.stat-card:hover .stat-icon,
.action-card:hover .action-icon {
  transform: translateY(-1px) !important;
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.22) !important;
  border-color: rgba(201, 162, 39, 0.45) !important;
}

/* Nettoyage : neutralise les anciens halos si patch v1 présent */
.stat-icon::after,
.action-icon::after {
  content: none !important;
}

/* ======================== */
/* VALIDATION MENSUELLE     */
/* ======================== */
/* Section flex : zone contenu + colonne drawer (sticky), espace constant quand ouvert */
#validation-mensuelle { display: flex; flex-wrap: nowrap; align-items: flex-start; gap: 0; }
#validation-mensuelle .val-zone { flex: 1; min-width: 0; max-width: 1200px; margin: 0; padding: 0 1rem; }
.val-drawer-sticky-wrapper { flex-shrink: 0; width: 0; min-width: 0; position: sticky; top: 5rem; align-self: flex-start; overflow: hidden; transition: width 0.3s ease, margin-left 0.3s ease; }
.val-drawer-sticky-wrapper:not(.drawer-closed) { width: 380px; max-width: 95vw; margin-left: 1rem; }
.val-drawer-sticky-wrapper.drawer-closed { width: 0; min-width: 0; margin-left: 0; }
.val-header { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border); }
.val-header h2 { font-size: 1.5rem; font-weight: 700; margin-bottom: 0.25rem; }
.val-header .val-subtitle { color: var(--text-muted); font-size: 0.9rem; }
.val-header-badges { display: flex; flex-wrap: wrap; gap: 0.5rem; align-items: center; }
.val-badge { padding: 0.35rem 0.75rem; border-radius: 999px; font-size: 0.8rem; font-weight: 600; }
.val-badge.ouverte { background: rgba(160,174,192,0.2); color: var(--text-secondary); border: 1px solid var(--border); }
.val-badge.anomalies { background: rgba(153,27,27,0.25); color: #fca5a5; border: 1px solid rgba(153,27,27,0.4); }
.val-badge.pret { background: rgba(45,106,79,0.25); color: #6ee7b7; border: 1px solid rgba(45,106,79,0.4); }
.val-header-actions { display: flex; gap: 0.5rem; }
.val-header-actions .btn { padding: 0.5rem 1rem; border-radius: 10px; font-size: 0.9rem; border: 1px solid var(--border); background: var(--bg-elevated); color: var(--text-primary); cursor: pointer; }
.val-header-actions .btn:hover { border-color: var(--secondary); color: var(--secondary); }
.val-header-actions .btn.secondary { background: var(--gradient-gold); color: #0d1b2a; border-color: var(--secondary); }
.val-back { margin-bottom: 1rem; }
.val-back button { background: none; border: none; color: var(--text-secondary); cursor: pointer; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 0.5rem; white-space: nowrap; padding: 0.5rem 0; min-height: 2.25rem; }
.val-back button:hover { color: var(--secondary); }
.val-kpis { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem; }
@media (max-width: 900px) { .val-kpis { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 500px) { .val-kpis { grid-template-columns: 1fr; } }
.val-kpi { background: var(--gradient-card); border: 1px solid var(--border); border-radius: 14px; padding: 1rem 1.25rem; cursor: pointer; transition: all 0.2s; }
.val-kpi:hover { border-color: var(--secondary); transform: translateY(-2px); }
.val-kpi.active { border-color: var(--secondary); box-shadow: 0 0 0 2px var(--glow-accent); }
.val-kpi .val-kpi-value { font-size: 1.75rem; font-weight: 700; font-family: 'JetBrains Mono', monospace; color: var(--secondary); }
.val-kpi .val-kpi-label { font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.25rem; }
.val-kpi.conformes .val-kpi-value { color: var(--accent); }
.val-kpi.anomalies .val-kpi-value { color: #f87171; }
.val-kpi.jalons .val-kpi-value { color: #fbbf24; }
.val-kpi.donnees .val-kpi-value { color: #fb923c; }
.val-table-wrap { background: var(--gradient-card); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; margin-bottom: 1.5rem; }
.val-table-toolbar { display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center; padding: 1rem; border-bottom: 1px solid var(--border); }
.val-table-toolbar input[type="search"] { flex: 1; min-width: 180px; padding: 0.5rem 1rem; border-radius: 10px; border: 1px solid var(--border); background: var(--bg-elevated); color: var(--text-primary); }
.val-table-filters { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.val-table-filters button { padding: 0.4rem 0.85rem; border-radius: 8px; border: 1px solid var(--border); background: transparent; color: var(--text-secondary); font-size: 0.85rem; cursor: pointer; }
.val-table-filters button:hover, .val-table-filters button.active { background: rgba(201,162,39,0.15); color: var(--secondary); border-color: var(--secondary); }
.val-table-sort { padding: 0.4rem 0.75rem; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-elevated); color: var(--text-secondary); font-size: 0.85rem; cursor: pointer; }
.val-projects-table { width: 100%; border-collapse: collapse; }
.val-projects-table th { text-align: left; padding: 0.75rem 1rem; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); border-bottom: 1px solid var(--border); background: var(--bg-elevated); }
.val-projects-table td { padding: 0.75rem 1rem; border-bottom: 1px solid var(--border); }
.val-projects-table tr:hover { background: rgba(201,162,39,0.06); }
.val-projects-table tr.selected { background: rgba(201,162,39,0.12); }
.val-projects-table .badge { padding: 0.2rem 0.5rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; }
.val-projects-table .badge.conforme { background: rgba(45,106,79,0.25); color: #6ee7b7; }
.val-projects-table .badge.reserves { background: rgba(245,158,11,0.25); color: #fcd34d; }
.val-projects-table .badge.non-conforme { background: rgba(153,27,27,0.25); color: #fca5a5; }
.val-projects-table .anom-count { display: inline-flex; align-items: center; justify-content: center; min-width: 1.5rem; height: 1.5rem; padding: 0 0.4rem; border-radius: 999px; font-size: 0.75rem; background: rgba(153,27,27,0.3); color: #fca5a5; }
.val-projects-table .val-collectivite-pastille { display: inline-flex; align-items: center; margin-left: 0.4rem; padding: 0.15rem 0.5rem; font-size: 0.7rem; font-weight: 500; color: var(--text-muted); background: rgba(201,162,39,0.12); border: 1px solid rgba(201,162,39,0.3); border-radius: 999px; }
.val-projects-table .val-actions-cell { white-space: nowrap; }
.val-projects-table .val-actions-btns { display: flex; flex-wrap: wrap; gap: 0.5rem; align-items: center; }
.val-projects-table .val-btn-corriger { font-size: 0.8rem; padding: 0.35rem 0.6rem; }
/* Drawer : colonne intégrée au layout, pas de position fixe dynamique */
.val-drawer { width: 380px; max-width: 95vw; min-height: 200px; max-height: calc(100vh - 5rem); background: var(--gradient-card); border: 1px solid var(--border); border-radius: 14px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); z-index: 10; transform: translateX(100%); transition: transform 0.25s ease; display: flex; flex-direction: column; overflow: hidden; }
.val-drawer.open { transform: translateX(0); }
.val-drawer-header { padding: 1rem 1.25rem; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: flex-start; flex-shrink: 0; }
.val-drawer-header h3 { font-size: 1.1rem; margin-bottom: 0.25rem; }
.val-drawer-close { background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 1.25rem; padding: 0.25rem; line-height: 1; }
.val-drawer-close:hover { color: var(--text-primary); }
.val-drawer-body { padding: 1rem 1.25rem; flex-shrink: 0; }
#drawerAnomaliesList { flex: 1; min-height: 0; overflow-y: auto; overflow-x: hidden; -webkit-overflow-scrolling: touch; }
#drawerAnomaliesList::-webkit-scrollbar { width: 6px; }
#drawerAnomaliesList::-webkit-scrollbar-track { background: transparent; }
#drawerAnomaliesList::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
.val-anom-item { padding: 0.75rem 0; border-bottom: 1px solid var(--border); }
.val-anom-item:last-child { border-bottom: none; }
.val-anom-item .severity { font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
.val-anom-item .severity.blocking { color: #f87171; }
.val-anom-item .severity.info { color: #93c5fd; }
.val-decision { background: var(--gradient-card); border: 1px solid var(--border); border-radius: 14px; padding: 1.25rem; margin-bottom: 1rem; }
.val-decision-radio { display: flex; flex-direction: column; gap: 0.75rem; }
.val-decision-radio label { display: flex; align-items: flex-start; gap: 0.75rem; cursor: pointer; }
.val-decision-radio input[type="radio"] { margin-top: 0.35rem; }
.val-decision-radio .sous-texte { font-size: 0.85rem; color: var(--text-muted); margin-left: 1.75rem; margin-top: 0.2rem; }
.val-reserve-input { margin: 0.75rem 0 0 1.75rem; }
.val-reserve-input textarea { width: 100%; min-height: 80px; padding: 0.75rem; border-radius: 10px; border: 1px solid var(--border); background: var(--bg-elevated); color: var(--text-primary); font-family: inherit; resize: vertical; }
.val-synthese { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border); font-size: 0.9rem; color: var(--text-secondary); }
.val-cta { margin-bottom: 1.5rem; }
.val-cta button { padding: 1rem 2rem; font-size: 1.1rem; font-weight: 600; border-radius: 12px; border: none; background: var(--gradient-gold); color: #0d1b2a; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem; transition: all 0.2s; }
.val-cta button:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 30px var(--glow-accent); }
.val-cta button:disabled { opacity: 0.5; cursor: not-allowed; }
.val-audit { background: var(--gradient-card); border: 1px solid var(--border); border-radius: 14px; padding: 1rem; }
.val-audit h4 { font-size: 1rem; margin-bottom: 0.75rem; }
.val-audit-list { max-height: 200px; overflow-y: auto; }
.val-audit-item { padding: 0.5rem 0; border-bottom: 1px solid var(--border); font-size: 0.85rem; color: var(--text-secondary); }
.val-audit-item:last-child { border-bottom: none; }


/* =========================
   ColConnect SIM UI Block
   ========================= */

.sim {
  /* Layout */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  background: linear-gradient(to right, #6a11cb, #2575fc);
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
}

.sim:hover {
  transform: scale(1.05);
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

.sim-title {
  font-size: 24px;
  color: white;
  margin-bottom: 10px;
}

.sim-content {
  font-size: 16px;
  color: white;
  margin-bottom: 20px;
  animation: fadeIn 1s;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@media (max-width: 768px) {
  .sim {
    padding: 15px;
  }
  .sim-title {
    font-size: 20px;
  }
  .sim-content {
    font-size: 14px;
  }
}

/* === CC_PATCH:DASHBOARD_THEME_V1 === */
#dashboard .hero-section{
  /* fond plus “premium institutionnel” */
  background: transparent;
}

#dashboard .hero-badge{
  background: rgba(201, 162, 39, 0.10);
  border: 1px solid rgba(201, 162, 39, 0.28);
  color: var(--secondary);
}

#dashboard .stat-card,
#dashboard .action-card{
  border-color: rgba(255,255,255,0.10);
}

#dashboard .stat-card::before{
  /* barre haute un peu moins “flash” */
  opacity: 0.95;
}

#dashboard .action-card{
  background: var(--gradient-card);
}

#dashboard .action-card.action-card-primary{
  border: 1px solid rgba(201, 162, 39, 0.30);
  box-shadow: 0 18px 45px rgba(0,0,0,0.28);
}

#dashboard .action-card.action-card-primary .action-icon{
  /* cohérence avec l’or institutionnel */
  background: rgba(201, 162, 39, 0.92) !important;
  border-color: rgba(201, 162, 39, 0.35) !important;
}
/* === /CC_PATCH:DASHBOARD_THEME_V1 === */

/* === CC_PATCH_DASHBOARD_THEME_V1 === */
/* Dashboard: palette institutionnelle (navy/gold) + contraste + cartes */
:root{
  --cc-navy-0: #070d16;
  --cc-navy-1: #0b1524;
  --cc-navy-2: #0d1b2a;
  --cc-blue-1: #1e3a5f;
  --cc-blue-2: #2c5282;

  --cc-gold-1: #c9a227;
  --cc-gold-2: #d4b545;

  --cc-green-1:#2d6a4f;
  --cc-green-2:#40916c;

  --cc-text: rgba(255,255,255,.92);
  --cc-text-soft: rgba(255,255,255,.78);
  --cc-border: rgba(255,255,255,.10);
}

/* Fond global + overlays (si présents) */
body.colconnect{
  background: radial-gradient(1200px 600px at 18% 0%, rgba(201,162,39,.14), transparent 55%),
              radial-gradient(900px 520px at 85% 10%, rgba(56,189,248,.10), transparent 60%),
              linear-gradient(180deg, var(--cc-navy-0), var(--cc-navy-2)) !important;
}

/* Header / tabs */
.header{
  background: linear-gradient(180deg, rgba(11,21,36,.92), rgba(13,27,42,.86)) !important;
  border-bottom: 1px solid rgba(255,255,255,.06) !important;
}
.nav-tab{
  border: 1px solid rgba(255,255,255,.10) !important;
  background: rgba(255,255,255,.04) !important;
  color: rgba(255,255,255,.82) !important;
}
.nav-tab.active{
  background: linear-gradient(135deg, var(--cc-gold-1), var(--cc-gold-2)) !important;
  color: #0d1b2a !important;
  border-color: rgba(201,162,39,.55) !important;
}

/* HERO */
#dashboard .hero-section{
  background: linear-gradient(180deg, rgba(10,22,36,.92), rgba(12,28,48,.86)) !important;
  border: 1px solid rgba(255,255,255,.08) !important;
  box-shadow: 0 18px 55px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.04) !important;
}
#dashboard .hero-title{
  color: var(--cc-text) !important;
}
#dashboard .hero-title span{
  background: linear-gradient(135deg, var(--cc-gold-1), var(--cc-gold-2)) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
}
#dashboard .hero-desc{
  color: var(--cc-text-soft) !important;
}
#dashboard .hero-badge{
  background: rgba(201,162,39,.16) !important;
  border: 1px solid rgba(201,162,39,.35) !important;
  color: rgba(255,255,255,.90) !important;
}

/* Cartes KPI */
#dashboard .stat-card{
  background: linear-gradient(145deg, rgba(27, 40, 56, 0.90), rgba(13, 27, 42, 0.95)) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
  box-shadow: 0 18px 45px rgba(0,0,0,.35) !important;
}
#dashboard .stat-card::before{
  background: linear-gradient(135deg, var(--cc-gold-1), var(--cc-gold-2)) !important;
}
#dashboard .stat-value{ color: rgba(255,255,255,.92) !important; }
#dashboard .stat-label{ color: rgba(255,255,255,.75) !important; }

/* Pastilles icônes KPI (forces) */
#dashboard .stat-icon.blue   { background: rgba(30,58,95,.55) !important; color:#9ec5ff !important; }
#dashboard .stat-icon.green  { background: rgba(45,106,79,.55) !important; color:#7ff0c0 !important; }
#dashboard .stat-icon.purple { background: rgba(201,162,39,.38) !important; color:#fde68a !important; }
#dashboard .stat-icon.orange { background: rgba(180,83,9,.38) !important;  color:#ffd3a6 !important; }

/* Quick actions */
#dashboard .action-card{
  background: rgba(255,255,255,.03) !important;
  border: 1px solid rgba(255,255,255,.10) !important;
}
#dashboard .action-card:hover{
  border-color: rgba(201,162,39,.40) !important;
  box-shadow: 0 18px 45px rgba(0,0,0,.35) !important;
}
#dashboard .action-icon{
  background: linear-gradient(135deg, var(--cc-gold-1), var(--cc-gold-2)) !important;
  color: #0d1b2a !important;
  border: 1px solid rgba(201,162,39,.40) !important;
}
#dashboard .action-title{ color: rgba(255,255,255,.92) !important; }
#dashboard .action-desc{ color: rgba(255,255,255,.75) !important; }

/* Carte action principale */
#dashboard .action-card-primary{
  border-color: rgba(201,162,39,.45) !important;
  background: radial-gradient(900px 220px at 18% 0%, rgba(201,162,39,.18), transparent 58%),
              rgba(255,255,255,.03) !important;
}

/* Petits détails de lisibilité */
#dashboard a{ color: #fef08a !important; }
/* === /CC_PATCH_DASHBOARD_THEME_V1 === */
